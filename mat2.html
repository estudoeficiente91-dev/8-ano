
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quadril√°teros: √Çngulos e Lados - 8¬∫ Ano Matem√°tica: Aprenda e Pratique</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-button.active {
            background-color: #0369a1; /* Sky-700 */
            color: white;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .accordion-button.open + .accordion-content {
            max-height: 4000px; /* Increased max-height for potentially longer content */
        }
        .quiz-option:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .correct-answer {
            background-color: #10b981 !important; /* Emerald-500 */
            color: white !important;
            border-color: #059669 !important; /* Emerald-600 */
        }
        .wrong-answer {
            background-color: #ef4444 !important; /* Red-500 */
            color: white !important;
            border-color: #dc2626 !important; /* Red-600 */
        }
        .content-text { /* General text styling for readability */
            font-size: 1rem;
            line-height: 1.6;
        }
        .term-highlight {
            font-family: 'Courier New', Courier, monospace;
            background-color: #f3f4f6; /* gray-100 */
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.95rem;
        }
        .example-diagram {
            font-style: italic;
            color: #075985; /* sky-800 for example sentences */
            margin-left: 1rem;
            display: block;
            margin-top: 0.5rem;
        }
         .quiz-question-text {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        /* Removed .quiz-image styles as images are removed */
    </style>
    <!-- Chosen Palette: Warm Neutrals with Sky Blue accent (Consistent with previous apps) -->
    <!-- Application Structure Plan: Two-section SPA. 'Aprender' section uses an accordion for step-by-step explanations of quadrilaterals properties (parallelograms, rhombuses, rectangles, squares, trapezoids) and problem-solving, relevant to 8th grade. 'Praticar' section is an interactive quiz with immediate feedback and score tracking, focusing on calculating angles and sides. Images removed from questions. This structure separates learning from application, aiding comprehension and retention. Navigation is via two main buttons. -->
    <!-- Visualization & Content Choices: Report Info: Simplified geometry concepts (quadrilaterals, properties, angle/side calculations) for 8th grade -> Goal: Inform/Organize -> Viz/Presentation: Accordion in 'Aprender'. Interaction: Expand/collapse. Justification: Breaks down geometrical information into digestible steps. Report Info: Age-appropriate geometry problems (calculating angles/sides) & solutions -> Goal: Test knowledge/Compare -> Viz/Presentation: Interactive quiz in 'Praticar'. Interaction: Clickable answers, feedback, score. Justification: Active learning, immediate reinforcement. Images removed. Library/Method: Vanilla JS & Tailwind CSS. Content presented as styled text. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-stone-100 text-slate-800">

    <div class="container mx-auto max-w-4xl p-4 sm:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-sky-800">Matem√°tica - 8¬∫ Ano: Quadril√°teros</h1>
            <p class="text-slate-600 mt-2">Aprenda as propriedades dos quadril√°teros e resolva problemas com √¢ngulos e lados!</p>
        </header>

        <nav class="flex justify-center mb-8 bg-white p-2 rounded-lg shadow-sm">
            <button id="btn-learn" class="tab-button active flex-1 sm:flex-none text-center py-2 px-6 font-semibold rounded-md transition-colors duration-300">Aprender</button>
            <button id="btn-practice" class="tab-button flex-1 sm:flex-none text-center py-2 px-6 font-semibold rounded-md transition-colors duration-300">Praticar</button>
        </nav>

        <main>
            <section id="learn-section">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h2 class="text-2xl font-bold mb-4 text-sky-700">Desvendando os Quadril√°teros</h2>
                    <p class="mb-6 content-text">Quadril√°teros s√£o figuras geom√©tricas muito comuns no nosso dia a dia! Vamos explorar suas propriedades e aprender a resolver problemas envolvendo seus √¢ngulos e lados.</p>
                    
                    <div id="accordion-container" class="space-y-3">
                    </div>

                    <div class="mt-6 p-4 bg-sky-50 border border-sky-200 rounded-lg">
                        <h3 class="font-bold text-lg text-sky-800">üí° Fique Ligado!</h3>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-slate-700 content-text">
                            <li><strong class="font-semibold">Soma dos √Çngulos Internos:</strong> Em TODO quadril√°tero, a soma dos seus quatro √¢ngulos internos √© sempre <strong>360¬∞</strong>.</li>
                            <li><strong class="font-semibold">Lados Opostos vs. Lados Consecutivos:</strong> Lados opostos n√£o se tocam (a n√£o ser nos v√©rtices). Lados consecutivos compartilham um v√©rtice.</li>
                            <li><strong class="font-semibold">√Çngulos Opostos vs. √Çngulos Consecutivos:</strong> √Çngulos opostos n√£o compartilham um lado. √Çngulos consecutivos compartilham um lado.</li>
                            <li><strong class="font-semibold">Diagonais:</strong> Segmentos de reta que unem dois v√©rtices n√£o consecutivos.</li>
                            <li><strong class="font-semibold">Paralelismo:</strong> Lembre-se do que s√£o retas paralelas (nunca se cruzam).</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="practice-section" class="hidden">
                 <div class="bg-white p-6 rounded-lg shadow">
                    <h2 class="text-2xl font-bold mb-2 text-sky-700">Hora de Praticar para a Prova!</h2>
                    <p class="mb-6 content-text">Resolva os problemas abaixo para testar seus conhecimentos sobre as propriedades dos quadril√°teros, c√°lculo de √¢ngulos e lados.</p>

                    <div id="quiz-container">
                        <p id="question-progress" class="text-center font-semibold text-slate-600 mb-4"></p>
                        <div id="question-area" class="bg-stone-50 p-6 rounded-lg border border-stone-200 text-center">
                            <!-- Question text will be injected here -->
                        </div>
                        <div id="options-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
                            <!-- Options will be injected here -->
                        </div>
                        <div id="feedback-container" class="mt-4 p-4 rounded-lg text-center hidden">
                            <p id="feedback-text" class="font-semibold"></p>
                            <p id="feedback-explanation" class="text-sm mt-1"></p>
                        </div>
                        <div class="text-center mt-6">
                            <button id="next-question-btn" class="hidden py-2 px-8 bg-sky-600 text-white font-semibold rounded-lg shadow-md hover:bg-sky-700 transition-colors">Pr√≥xima</button>
                        </div>
                    </div>
                    
                    <div id="score-container" class="hidden text-center py-8">
                        <h3 class="text-2xl font-bold text-sky-800">Quiz Finalizado!</h3>
                        <p id="score-text" class="text-lg mt-2"></p>
                        <div id="score-visual" class="w-full bg-stone-200 rounded-full h-4 my-4 overflow-hidden">
                            <div id="score-bar" class="bg-emerald-500 h-4 rounded-full transition-all duration-500"></div>
                        </div>
                        <button id="restart-quiz-btn" class="mt-6 py-2 px-8 bg-sky-600 text-white font-semibold rounded-lg shadow-md hover:bg-sky-700 transition-colors">Tentar Novamente</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const learnSection = document.getElementById('learn-section');
            const practiceSection = document.getElementById('practice-section');
            const btnLearn = document.getElementById('btn-learn');
            const btnPractice = document.getElementById('btn-practice');

            const accordionContainer = document.getElementById('accordion-container');
            const quizContainer = document.getElementById('quiz-container');
            const scoreContainer = document.getElementById('score-container');
            const questionProgress = document.getElementById('question-progress');
            const questionArea = document.getElementById('question-area'); 
            const optionsContainer = document.getElementById('options-container');
            const feedbackContainer = document.getElementById('feedback-container');
            const feedbackText = document.getElementById('feedback-text');
            const feedbackExplanation = document.getElementById('feedback-explanation');
            const nextQuestionBtn = document.getElementById('next-question-btn');
            const restartQuizBtn = document.getElementById('restart-quiz-btn');
            const scoreTextElement = document.getElementById('score-text');
            const scoreBar = document.getElementById('score-bar');

            const learnData = [
                {
                    title: '1. O que s√£o Quadril√°teros?',
                    content: 'Quadril√°teros s√£o pol√≠gonos que possuem <strong>quatro lados</strong>, <strong>quatro v√©rtices</strong> (os "cantos") e <strong>quatro √¢ngulos internos</strong>. A palavra "quadri" significa quatro e "l√°tero" significa lado.<br><br>Uma propriedade fundamental de todo quadril√°tero convexo √© que a <strong>soma dos seus √¢ngulos internos √© sempre igual a 360¬∞</strong>. Isso acontece porque podemos dividir qualquer quadril√°tero em dois tri√¢ngulos tra√ßando uma diagonal, e cada tri√¢ngulo tem 180¬∞ na soma dos √¢ngulos internos (180¬∞ + 180¬∞ = 360¬∞).'
                },
                {
                    title: '2. Paralelogramos: Propriedades Gerais',
                    content: 'Um paralelogramo √© um quadril√°tero que possui os <strong>lados opostos paralelos</strong>. A partir dessa defini√ß√£o, surgem v√°rias propriedades importantes:<br><ul><li><strong>Lados Opostos Congruentes (iguais):</strong> Os lados que est√£o um de frente para o outro t√™m a mesma medida.</li><li><strong>√Çngulos Opostos Congruentes (iguais):</strong> Os √¢ngulos que est√£o um de frente para o outro t√™m a mesma medida.</li><li><strong>√Çngulos Consecutivos Suplementares:</strong> Dois √¢ngulos seguidos (vizinhos) somam 180¬∞.</li><li><strong>Diagonais se Cruzam no Ponto M√©dio:</strong> As duas diagonais se cortam exatamente na metade de cada uma.</li></ul><span class="example-diagram">Imagine um ret√¢ngulo "inclinado". Ele ainda √© um paralelogramo!</span>'
                },
                {
                    title: '3. Losangos: Lados Iguais e Diagonais Perpendiculares',
                    content: 'O losango √© um tipo especial de paralelogramo que possui <strong>todos os quatro lados congruentes (iguais)</strong>.<br><br>Al√©m de todas as propriedades de um paralelogramo, o losango tem duas extras:<br><ul><li><strong>Diagonais Perpendiculares:</strong> As diagonais se cruzam formando √¢ngulos de 90¬∞.</li><li><strong>Diagonais s√£o Bissetrizes dos √Çngulos Internos:</strong> Cada diagonal divide os √¢ngulos dos v√©rtices por onde ela passa exatamente ao meio.</li></ul><span class="example-diagram">Pense na forma de uma pipa ou de um diamante de cartas de baralho.</span>'
                },
                {
                    title: '4. Ret√¢ngulos: Quatro √Çngulos Retos',
                    content: 'O ret√¢ngulo √© um tipo especial de paralelogramo que possui os <strong>quatro √¢ngulos internos retos (iguais a 90¬∞)</strong>.<br><br>Al√©m de todas as propriedades de um paralelogramo, o ret√¢ngulo tem uma propriedade extra importante:<br><ul><li><strong>Diagonais Congruentes (iguais):</strong> As duas diagonais t√™m a mesma medida.</li></ul><span class="example-diagram">Uma porta, uma janela, a tela do seu celular... s√£o exemplos de ret√¢ngulos!</span>'
                },
                {
                    title: '5. Quadrados: O Mais "Perfeito" de Todos',
                    content: 'O quadrado √© um quadril√°tero super especial! Ele √©, ao mesmo tempo, um <strong>losango e um ret√¢ngulo</strong>. Isso significa que ele possui:<br><ul><li><strong>Quatro lados congruentes (iguais)</strong> - propriedade do losango.</li><li><strong>Quatro √¢ngulos internos retos (90¬∞)</strong> - propriedade do ret√¢ngulo.</li></ul><br>Portanto, o quadrado herda TODAS as propriedades dos paralelogramos, dos losangos e dos ret√¢ngulos!<br><ul><li>Lados opostos paralelos e iguais.</li><li>√Çngulos opostos iguais (todos 90¬∞).</li><li>√Çngulos consecutivos suplementares (90¬∞+90¬∞=180¬∞).</li><li>Diagonais se cruzam no ponto m√©dio.</li><li>Diagonais s√£o congruentes (iguais).</li><li>Diagonais s√£o perpendiculares.</li><li>Diagonais s√£o bissetrizes dos √¢ngulos internos.</li></ul>'
                },
                {
                    title: '6. Trap√©zios: Apenas um Par de Lados Paralelos',
                    content: 'O trap√©zio √© um quadril√°tero que possui <strong>apenas um par de lados opostos paralelos</strong>. Esses lados paralelos s√£o chamados de <strong>bases</strong> (base maior e base menor). Os outros dois lados s√£o chamados de lados n√£o paralelos ou obl√≠quos.<br><br>Existem tipos especiais de trap√©zios:<br><ul><li><strong>Trap√©zio Is√≥sceles:</strong> Os lados n√£o paralelos s√£o congruentes (iguais). Os √¢ngulos de cada base tamb√©m s√£o congruentes entre si. As diagonais s√£o congruentes.</li><li><strong>Trap√©zio Ret√¢ngulo:</strong> Possui dois √¢ngulos internos retos (90¬∞), formados por um dos lados n√£o paralelos sendo perpendicular √†s bases.</li><li><strong>Trap√©zio Escaleno:</strong> Os lados n√£o paralelos t√™m medidas diferentes e os √¢ngulos das bases tamb√©m s√£o diferentes.</li></ul>A soma dos √¢ngulos adjacentes a um mesmo lado n√£o paralelo √© sempre 180¬∞ (s√£o colaterais internos).'
                },
                {
                    title: '7. Resolu√ß√£o de Problemas com Quadril√°teros',
                    content: 'Para resolver problemas envolvendo quadril√°teros, voc√™ usar√° as propriedades que aprendeu!<br><br><strong>Para calcular √¢ngulos desconhecidos:</strong><br><ul><li>Lembre-se que a soma dos quatro √¢ngulos internos √© sempre 360¬∞.</li><li>Use as propriedades dos √¢ngulos opostos e consecutivos dos paralelogramos.</li><li>Lembre-se dos √¢ngulos de 90¬∞ em ret√¢ngulos e quadrados.</li><li>Use as propriedades dos √¢ngulos das bases em trap√©zios is√≥sceles.</li></ul><em>Exemplo: Em um paralelogramo, um √¢ngulo mede 70¬∞. Quais s√£o os outros tr√™s? O oposto tamb√©m √© 70¬∞. Os outros dois s√£o (180¬∞-70¬∞) = 110¬∞ cada.</em><br><br><strong>Para calcular lados desconhecidos:</strong><br><ul><li>Lembre-se que lados opostos de paralelogramos s√£o iguais.</li><li>Todos os lados de losangos e quadrados s√£o iguais.</li><li>Use informa√ß√µes dadas sobre per√≠metros ou rela√ß√µes entre os lados.</li></ul><em>Exemplo: Um lado de um losango mede 5 cm. Qual o per√≠metro? 4 * 5 cm = 20 cm.</em>'
                }
            ];

            const quizData = [
                // Questions from previous version (images removed from data)
                { question: "Qual √© a soma dos √¢ngulos internos de qualquer quadril√°tero?", answer: "360¬∞", options: ["180¬∞", "270¬∞", "360¬∞", "540¬∞"], explanation: "A soma dos √¢ngulos internos de todo quadril√°tero convexo √© sempre 360 graus." },
                { question: "Um paralelogramo tem um √¢ngulo medindo 80¬∞. Qual a medida do seu √¢ngulo oposto?", answer: "80¬∞", options: ["100¬∞", "80¬∞", "280¬∞", "N√£o se pode determinar"], explanation: "Em um paralelogramo, os √¢ngulos opostos s√£o sempre congruentes (iguais)." },
                { question: "Se um lado de um losango mede 7 cm, qual o seu per√≠metro?", answer: "28 cm", options: ["14 cm", "21 cm", "28 cm", "49 cm"], explanation: "Um losango tem todos os quatro lados iguais. Per√≠metro = 4 * lado = 4 * 7 = 28 cm." },
                { question: "Qual propriedade √© exclusiva do ret√¢ngulo (e n√£o de todos os paralelogramos)?", answer: "Diagonais congruentes (iguais)", options: ["Lados opostos paralelos", "√Çngulos opostos iguais", "Diagonais congruentes (iguais)", "Diagonais se bissetam"], explanation: "Todos os paralelogramos t√™m diagonais que se bissetam, mas apenas nos ret√¢ngulos (e quadrados) elas s√£o sempre congruentes." },
                { question: "Um quadrado possui todas as propriedades de qual par de figuras?", answer: "Losango e Ret√¢ngulo", options: ["Trap√©zio e Losango", "Losango e Ret√¢ngulo", "Paralelogramo e Trap√©zio", "Ret√¢ngulo e C√≠rculo"], explanation: "O quadrado √© um tipo especial de losango (lados iguais) e tamb√©m um tipo especial de ret√¢ngulo (√¢ngulos retos)." },
                { question: "Em um trap√©zio is√≥sceles, os √¢ngulos da base maior medem 70¬∞ cada. Se a base menor tem um √¢ngulo de 110¬∞, qual o outro √¢ngulo da base menor?", answer: "110¬∞", options: ["70¬∞", "90¬∞", "110¬∞", "20¬∞"], explanation: "Em um trap√©zio is√≥sceles, os √¢ngulos de cada base s√£o congruentes. Assim, os dois √¢ngulos da base menor s√£o iguais." },
                { question: "Tr√™s √¢ngulos de um quadril√°tero medem 60¬∞, 110¬∞ e 90¬∞. Qual a medida do quarto √¢ngulo?", answer: "100¬∞", options: ["80¬∞", "90¬∞", "100¬∞", "120¬∞"], explanation: "Soma total = 360¬∞. Soma dos conhecidos = 60+110+90 = 260¬∞. Quarto √¢ngulo = 360 - 260 = 100¬∞." },
                { question: "As diagonais de um losango s√£o sempre:", answer: "Perpendiculares entre si", options: ["Congruentes (iguais)", "Paralelas aos lados", "Perpendiculares entre si", "Menores que os lados"], explanation: "Uma propriedade chave do losango √© que suas diagonais se cruzam formando √¢ngulos de 90¬∞ (s√£o perpendiculares)." },
                { question: "Um paralelogramo tem lados opostos medindo (x + 5) cm e 10 cm. Qual o valor de x?", answer: "5", options: ["3", "5", "10", "15"], explanation: "Lados opostos de um paralelogramo s√£o iguais. Ent√£o x+5 = 10, logo x = 5." },
                { question: "Em um trap√©zio ret√¢ngulo, quantos √¢ngulos retos ele possui?", answer: "Dois", options: ["Um", "Dois", "Tr√™s", "Quatro"], explanation: "Um trap√©zio ret√¢ngulo possui exatamente dois √¢ngulos de 90¬∞." },
                { question: "Se um √¢ngulo de um paralelogramo mede 115¬∞, qual a medida de um √¢ngulo consecutivo (vizinho) a ele?", answer: "65¬∞", options: ["115¬∞", "75¬∞", "65¬∞", "245¬∞"], explanation: "√Çngulos consecutivos em um paralelogramo s√£o suplementares (somam 180¬∞). 180¬∞ - 115¬∞ = 65¬∞." },
                { question: "Qual quadril√°tero tem lados opostos paralelos e todos os √¢ngulos internos retos?", answer: "Ret√¢ngulo", options: ["Losango", "Trap√©zio", "Ret√¢ngulo", "Paralelogramo qualquer"], explanation: "Essa √© a defini√ß√£o de um ret√¢ngulo (que tamb√©m √© um paralelogramo)." },
                { question: "Um quadril√°tero tem √¢ngulos expressos por x, 2x, 3x e 4x. Qual o valor de x?", answer: "36¬∞", options: ["30¬∞", "36¬∞", "40¬∞", "45¬∞"], explanation: "A soma √© x + 2x + 3x + 4x = 360¬∞. Ent√£o 10x = 360¬∞. Logo, x = 36¬∞." },
                { question: "As diagonais de um quadrado formam que tipo de √¢ngulo ao se cruzarem?", answer: "90¬∞ (Reto)", options: ["Agudo (<90¬∞)", "90¬∞ (Reto)", "Obtuso (>90¬∞)", "Raso (180¬∞)"], explanation: "O quadrado √© um losango, e as diagonais do losango s√£o perpendiculares, formando √¢ngulos de 90¬∞." },
                { question: "Um trap√©zio tem bases medindo 10cm e 16cm. A medida da sua base m√©dia √©:", answer: "13 cm", options: ["10 cm", "16 cm", "26 cm", "13 cm"], explanation: "A base m√©dia de um trap√©zio √© a m√©dia aritm√©tica das bases: (10+16)/2 = 26/2 = 13 cm." },
                { question: "Qual √© o nome do quadril√°tero que tem todos os lados iguais e todos os √¢ngulos retos?", answer: "Quadrado", options: ["Ret√¢ngulo", "Losango", "Quadrado", "Trap√©zio"], explanation: "O quadrado combina as propriedades de ter lados iguais (losango) e √¢ngulos retos (ret√¢ngulo)." },
                { question: "Um dos √¢ngulos internos de um losango mede 120¬∞. Qual a medida do √¢ngulo oposto a ele?", answer: "120¬∞", options: ["60¬∞", "90¬∞", "120¬∞", "N√£o √© poss√≠vel saber"], explanation: "Em um losango (que √© um paralelogramo), √¢ngulos opostos s√£o iguais." },
                { question: "Se as diagonais de um paralelogramo s√£o congruentes (iguais), podemos afirmar que ele √© um:", answer: "Ret√¢ngulo (ou Quadrado)", options: ["Losango", "Ret√¢ngulo (ou Quadrado)", "Trap√©zio", "Paralelogramo qualquer"], explanation: "A propriedade de diagonais congruentes √© espec√≠fica dos ret√¢ngulos e, consequentemente, dos quadrados." },
                { question: "Um lado de um ret√¢ngulo mede 8 cm e seu per√≠metro √© 28 cm. Qual a medida do outro lado?", answer: "6 cm", options: ["6 cm", "8 cm", "10 cm", "14 cm"], explanation: "Per√≠metro = 2*(lado1 + lado2).  28 = 2*(8 + lado2) => 14 = 8 + lado2 => lado2 = 6 cm." },
                { question: "Qual tipo de trap√©zio possui os lados n√£o paralelos congruentes (iguais)?", answer: "Trap√©zio Is√≥sceles", options: ["Trap√©zio Ret√¢ngulo", "Trap√©zio Escaleno", "Trap√©zio Is√≥sceles", "Nenhum trap√©zio"], explanation: "Essa √© a defini√ß√£o do trap√©zio is√≥sceles." },
                { question: "Os √¢ngulos de um quadril√°tero s√£o x, x+10¬∞, x+20¬∞ e x+30¬∞. Qual o valor de x?", answer: "75¬∞", options: ["60¬∞", "70¬∞", "75¬∞", "80¬∞"], explanation: "Soma: x + (x+10) + (x+20) + (x+30) = 360 => 4x + 60 = 360 => 4x = 300 => x = 75¬∞." },
                { question: "Em um losango, uma diagonal mede 6 cm e a outra mede 8 cm. As diagonais se cruzam formando um √¢ngulo de:", answer: "90¬∞", options: ["45¬∞", "60¬∞", "90¬∞", "Depende dos lados"], explanation: "As diagonais de um losango s√£o sempre perpendiculares." },
                { question: "Um paralelogramo tem um lado medindo 2y - 3 e o lado oposto medindo 15. Qual o valor de y?", answer: "9", options: ["6", "7.5", "9", "12"], explanation: "Lados opostos s√£o iguais: 2y - 3 = 15 => 2y = 18 => y = 9." },
                { question: "Um trap√©zio tem √¢ngulos da base maior medindo 65¬∞ e 75¬∞. Este trap√©zio pode ser classificado como:", answer: "Escaleno (ou nenhum dos outros)", options: ["Is√≥sceles", "Ret√¢ngulo", "Escaleno (ou nenhum dos outros)", "Quadrado"], explanation: "Se os √¢ngulos da base s√£o diferentes, ele n√£o √© is√≥sceles nem ret√¢ngulo (a menos que os outros sejam 90¬∞). Portanto, √© escaleno ou um tipo gen√©rico." },
                { question: "A diagonal de um ret√¢ngulo o divide em dois tri√¢ngulos:", answer: "Congruentes (iguais)", options: ["Equil√°teros", "Is√≥sceles, n√£o congruentes", "Congruentes (iguais)", "Escalenos diferentes"], explanation: "A diagonal de um ret√¢ngulo forma dois tri√¢ngulos ret√¢ngulos congruentes." },
                { question: "Se os quatro √¢ngulos de um paralelogramo s√£o iguais, ele √© um:", answer: "Ret√¢ngulo (ou Quadrado)", options: ["Losango", "Trap√©zio", "Ret√¢ngulo (ou Quadrado)", "Paralelogramo qualquer"], explanation: "Se os 4 √¢ngulos s√£o iguais e somam 360¬∞, cada um √© 90¬∞. Isso define um ret√¢ngulo (ou um quadrado, que √© um tipo de ret√¢ngulo)." },
                { question: "Um quadril√°tero tem √¢ngulos 90¬∞, 90¬∞, y e y+20¬∞. Qual o valor de y?", answer: "80¬∞", options: ["70¬∞", "80¬∞", "90¬∞", "100¬∞"], explanation: "90 + 90 + y + y + 20 = 360 => 200 + 2y = 360 => 2y = 160 => y = 80¬∞." },
                { question: "O per√≠metro de um quadrado √© 32 cm. Qual a medida de seu lado?", answer: "8 cm", options: ["4 cm", "8 cm", "16 cm", "32 cm"], explanation: "Per√≠metro do quadrado = 4 * lado.  32 = 4 * lado => lado = 8 cm." },
                { question: "Em qual destes quadril√°teros as diagonais N√ÉO s√£o necessariamente congruentes?", answer: "Losango", options: ["Quadrado", "Ret√¢ngulo", "Losango", "Trap√©zio Is√≥sceles"], explanation: "As diagonais do losango s√≥ s√£o congruentes se ele tamb√©m for um quadrado. Em um losango 'achatado', elas t√™m tamanhos diferentes." },
                { question: "Um trap√©zio tem base maior 20cm, base menor 12cm e altura 5cm. A base m√©dia mede:", answer: "16 cm", options: ["12 cm", "15 cm", "16 cm", "20 cm"], explanation: "Base m√©dia = (Base maior + Base menor) / 2 = (20 + 12) / 2 = 32 / 2 = 16 cm. A altura n√£o √© usada para calcular a base m√©dia." }
            ];
            
            let currentQuestionIndex = 0;
            let score = 0;
            let shuffledQuizData = [];

            let lastAnswerWasCorrect = false;

            function switchView(view) {
                if (view === 'learn') {
                    learnSection.classList.remove('hidden');
                    practiceSection.classList.add('hidden');
                    btnLearn.classList.add('active');
                    btnPractice.classList.remove('active');
                } else {
                    learnSection.classList.add('hidden');
                    practiceSection.classList.remove('hidden');
                    btnLearn.classList.remove('active');
                    btnPractice.classList.add('active');
                    startQuiz();
                }
            }

            btnLearn.addEventListener('click', () => switchView('learn'));
            btnPractice.addEventListener('click', () => switchView('practice'));

            function createAccordion() {
                accordionContainer.innerHTML = '';
                learnData.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'border border-stone-200 rounded-lg';
                    div.innerHTML = `
                        <button class="accordion-button w-full p-4 text-left font-semibold text-lg flex justify-between items-center hover:bg-stone-50 transition-colors">
                            <span>${item.title}</span>
                            <span class="transform transition-transform duration-300 text-sky-600">&#9662;</span>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 border-t border-stone-200 text-slate-700 prose max-w-none content-text">
                                ${item.content}
                            </div>
                        </div>
                    `;
                    accordionContainer.appendChild(div);
                });

                document.querySelectorAll('.accordion-button').forEach(button => {
                    button.addEventListener('click', () => {
                        const icon = button.querySelector('span:last-child');
                        const isOpen = button.classList.toggle('open');
                        icon.style.transform = isOpen ? 'rotate(180deg)' : 'rotate(0deg)';
                        if (isOpen) {
                            document.querySelectorAll('.accordion-button.open').forEach(openButton => {
                                if (openButton !== button) {
                                    openButton.classList.remove('open');
                                    openButton.querySelector('span:last-child').style.transform = 'rotate(0deg)';
                                }
                            });
                        }
                    });
                });
            }

            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            function startQuiz() {
                currentQuestionIndex = 0;
                score = 0;
                shuffledQuizData = shuffleArray([...quizData]);
                quizContainer.classList.remove('hidden');
                scoreContainer.classList.add('hidden');
                showQuestion();
            }

            function showQuestion() {
                feedbackContainer.classList.add('hidden');
                nextQuestionBtn.classList.add('hidden');

                const questionData = shuffledQuizData[currentQuestionIndex];
                questionProgress.textContent = `Quest√£o ${currentQuestionIndex + 1} de ${shuffledQuizData.length}`;
                
                // Removed image display logic
                questionArea.innerHTML = `<p class="quiz-question-text">${questionData.question}</p>`;

                optionsContainer.innerHTML = '';
                let currentOptions = shuffleArray([...questionData.options]); 

                currentOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.innerHTML = option; 
                    button.className = "quiz-option w-full p-3 border-2 border-stone-300 rounded-lg hover:bg-stone-200 transition-colors";
                    button.addEventListener('click', () => selectAnswer(option, questionData.answer, questionData.explanation));
                    optionsContainer.appendChild(button);
                });
            }

            function selectAnswer(selectedOption, correctAnswer, explanation) {
                const buttons = optionsContainer.querySelectorAll('button');
                let isCorrect = selectedOption === correctAnswer;
                lastAnswerWasCorrect = isCorrect;

                if (isCorrect) {
                    score++;
                    feedbackText.textContent = 'üéâ Correto!';
                    feedbackContainer.className = 'mt-4 p-4 rounded-lg text-center bg-emerald-100 border border-emerald-200 text-emerald-800';
                } else {
                    feedbackText.textContent = 'ü§î Incorreto! Esta pergunta aparecer√° novamente.';
                    feedbackContainer.className = 'mt-4 p-4 rounded-lg text-center bg-red-100 border border-red-200 text-red-800';
                }

                feedbackExplanation.innerHTML = `<strong>Explica√ß√£o:</strong> ${explanation}`;
                feedbackContainer.classList.remove('hidden');

                buttons.forEach(button => {
                    button.disabled = true;
                    if (button.innerHTML === correctAnswer) { 
                        button.classList.add('correct-answer');
                    } else if (button.innerHTML === selectedOption && !isCorrect) {
                        button.classList.add('wrong-answer');
                    }
                });

                nextQuestionBtn.classList.remove('hidden');
            }

            function showScore() {
                quizContainer.classList.add('hidden');
                scoreContainer.classList.remove('hidden');
                scoreTextElement.textContent = `Voc√™ acertou ${score} de ${shuffledQuizData.length} quest√µes!`;
                const percentage = (shuffledQuizData.length > 0) ? (score / shuffledQuizData.length) * 100 : 0;
                scoreBar.style.width = `${percentage}%`;
            }

            nextQuestionBtn.addEventListener('click', () => {
                if (lastAnswerWasCorrect) {
                    currentQuestionIndex++;
                } else {
                    // Move a quest√£o errada para o final da fila
                    const wrongQuestion = shuffledQuizData.splice(currentQuestionIndex, 1)[0];
                    shuffledQuizData.push(wrongQuestion);
                    // N√£o avan√ßa o √≠ndice, pois a pr√≥xima quest√£o agora est√° na mesma posi√ß√£o
                }

                if (currentQuestionIndex < shuffledQuizData.length) {
                    showQuestion();
                } else {
                    showScore();
                }
            });
            
            restartQuizBtn.addEventListener('click', startQuiz);

            createAccordion();
            switchView('learn');
        });
    </script>
</body>
</html>
