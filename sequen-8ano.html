<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sequ√™ncias Matem√°ticas ‚Äì 8¬∫ Ano</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root{
            --bg:#071023; --card:#0b1624; --accent:#3b82f6; --muted:#97a6bf; --text:#e6eef8; --success:#34d399; --danger:#ef4444; --border:rgba(255,255,255,0.12); --muted-2: rgba(230,238,248,0.85);
        }
        html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); color:var(--text);}
        .container{max-width:980px;margin:28px auto;padding:18px}
        .page-header{ padding:1.25rem; border-radius:12px; background: linear-gradient(180deg, rgba(59,130,246,0.06), transparent); box-shadow: 0 8px 24px rgba(2,6,23,0.6); }
        .card{ background: var(--card); color: var(--text); border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 6px 20px rgba(2,6,23,0.6); padding:18px }
        .btn-primary{ background: linear-gradient(90deg,var(--accent), #3b82f6); color: #061226; padding: .5rem 1.25rem; border-radius: 10px; border: 1px solid rgba(255,255,255,0.4); box-shadow: 0 6px 18px rgba(59,130,246,0.12); cursor: pointer; }
        .btn-ghost{ background: transparent; color: var(--muted-2); padding: .45rem .9rem; border-radius: 10px; border: 1px solid var(--border); cursor:pointer; }
        .option-btn{ display:block; width:100%; text-align:left; padding:.75rem 1rem; border-radius:10px; background: rgba(255,255,255,0.02); border:1px solid var(--border); color:var(--muted-2); cursor:pointer; transition: transform 150ms ease, background 150ms ease; }
        .option-btn:hover:not(:disabled){ background: rgba(255,255,255,0.035); transform: translateY(-1px); }
        .option-btn.correct{ background: var(--success) !important; color: #062e1f !important; border-color: rgba(4,120,87,0.18) !important; }
        .option-btn.wrong{ background: var(--danger) !important; color: #fff !important; border-color: rgba(185,28,28,0.18) !important; }
        .option-btn:disabled { cursor: not-allowed; }
        #question-buttons{ display:flex; flex-wrap:wrap; gap:8px; }
        #question-buttons button{ background: transparent; color: var(--muted-2); border:1px solid var(--border); padding:.45rem .6rem; border-radius:8px; cursor:pointer; }
        #question-buttons button.current-question { background-color: rgba(59, 130, 246, 0.2); border-color: var(--accent); }
        #question-buttons button.correct-status { background-color: var(--success); color: #062e1f; border-color: var(--success); }
        #question-buttons button.wrong-status { background-color: var(--danger); color: white; border-color: var(--danger); }
        .feedback-correct{ background: rgba(16,185,129,0.12); border:1px solid rgba(16,185,129,0.22); color: #bbf7d0; padding:12px; border-radius:8px }
        .feedback-wrong{ background: rgba(239,68,68,0.12); border:1px solid rgba(239,68,68,0.22); color: #ffdede; padding:12px; border-radius:8px }
        .celebrate{ animation: pop 480ms cubic-bezier(.2,.9,.3,1); box-shadow: 0 12px 36px rgba(96,165,250,0.18), 0 0 28px rgba(16,185,129,0.12); }
        @keyframes pop{ 0%{ transform: scale(1); } 50%{ transform: scale(1.08); } 100%{ transform: scale(1); } }
        .confetti{ position: fixed; z-index: 9999; pointer-events: none; font-size: 18px; opacity: 1; transform-origin: center; }
        @keyframes confetti-fall { 0%{ transform: translateY(-10vh) rotate(0deg); opacity:1 } 100%{ transform: translateY(100vh) rotate(540deg); opacity:0 } }
        .theme-light{ --bg: #f8fafc; --card: #ffffff; --muted: #475569; --text: #0f1724; --accent: #0284c7; --success: #047857; --danger: #b91c1c; --border: rgba(15,23,42,0.1); --muted-2: rgba(15,23,36,0.85); }
        .topic-section { margin-bottom: 2.5rem; border-left: 3px solid var(--accent); padding-left: 1.5rem; }
        .topic-title { font-size: 1.5rem; font-weight: 700; color: var(--accent); margin-bottom: 1rem; }
        .sub-topic-title { font-size: 1.15rem; font-weight: 600; color: var(--text); margin-top: 1.5rem; margin-bottom: 0.75rem; }
        .topic-section p, .topic-section ul { font-size: 1rem; color: var(--muted-2); line-height: 1.7; text-align: justify; }
        .topic-section ul { list-style-position: inside; list-style-type: disc; margin-top: 0.5rem; padding-left: 1rem;}
        .highlight { background-color: rgba(59, 130, 246, 0.1); padding: 0.2rem 0.4rem; border-radius: 4px; font-weight: 600; color: var(--accent); }
        .formula { background-color: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px; margin-top: 1rem; font-family: 'Courier New', Courier, monospace; text-align: center; font-size: 1.1rem; }
    </style>
</head>
<body class="antialiased">
    <div class="container">
        <header class="page-header">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold">Sequ√™ncias Matem√°ticas ‚Äî 8¬∫ Ano</h1>
                    <p class="text-sm text-slate-400">Guia de estudos sobre Padr√µes, P.A. e P.G.</p>
                </div>
                <div>
                    <button id="theme-toggle" class="btn-ghost">Tema</button>
                </div>
            </div>
        </header>

        <main class="mt-6">
            <div class="card">
                <nav class="mb-4">
                    <button id="btn-learn" class="btn-primary">Aprender</button>
                    <button id="btn-practice" class="btn-ghost ml-2">Praticar</button>
                </nav>

                <section id="learn-section">
                    <div class="space-y-8">
                        
                        <div class="topic-section">
                            <h2 class="topic-title">O que s√£o Sequ√™ncias?</h2>
                            <p>Uma <span class="highlight">sequ√™ncia num√©rica</span> √© uma lista de n√∫meros escritos em uma ordem espec√≠fica. Cada n√∫mero da lista √© chamado de <span class="highlight">termo</span>. As sequ√™ncias podem ser finitas (com um fim) ou infinitas (sem fim).</p>
                            <ul>
                                <li><strong>Exemplo Finito:</strong> (2, 4, 6, 8, 10) - Os n√∫meros pares positivos at√© 10.</li>
                                <li><strong>Exemplo Infinito:</strong> (3, 6, 9, 12, ...) - Os m√∫ltiplos de 3.</li>
                            </ul>
                            <p>Muitas sequ√™ncias seguem um padr√£o ou uma regra, que chamamos de <span class="highlight">lei de forma√ß√£o</span>. Essa lei nos permite encontrar qualquer termo da sequ√™ncia.</p>
                        </div>
                        
                        <div class="topic-section">
                             <h2 class="topic-title">Progress√£o Aritm√©tica (PA)</h2>
                             <p>Uma Progress√£o Aritm√©tica (PA) √© uma sequ√™ncia em que cada termo, a partir do segundo, √© igual ao anterior <span class="highlight">somado</span> a um valor constante, chamado de <span class="highlight">raz√£o (r)</span>.</p>
                             <p><strong>Exemplo:</strong> (5, 8, 11, 14, ...) √© uma PA. <br>Para achar a raz√£o, subtraia um termo pelo seu anterior: 8 - 5 = 3. A raz√£o (r) √© 3.</p>
                             <h3 class="sub-topic-title">F√≥rmula do Termo Geral da PA</h3>
                             <p>Para encontrar qualquer termo (a‚Çô) de uma PA sem precisar escrever todos os anteriores, usamos a f√≥rmula:</p>
                             <div class="formula">a‚Çô = a‚ÇÅ + (n - 1) ‚ãÖ r</div>
                             <p>Onde: <span class="highlight">a‚Çô</span> √© o termo que queremos encontrar, <span class="highlight">a‚ÇÅ</span> √© o primeiro termo, <span class="highlight">n</span> √© a posi√ß√£o do termo, e <span class="highlight">r</span> √© a raz√£o.</p>
                        </div>

                        <div class="topic-section">
                            <h2 class="topic-title">Progress√£o Geom√©trica (PG)</h2>
                            <p>Uma Progress√£o Geom√©trica (PG) √© uma sequ√™ncia em que cada termo, a partir do segundo, √© igual ao anterior <span class="highlight">multiplicado</span> por um valor constante, chamado de <span class="highlight">raz√£o (q)</span>.</p>
                            <p><strong>Exemplo:</strong> (2, 6, 18, 54, ...) √© uma PG.<br>Para achar a raz√£o, divida um termo pelo seu anterior: 6 / 2 = 3. A raz√£o (q) √© 3.</p>
                            <h3 class="sub-topic-title">F√≥rmula do Termo Geral da PG</h3>
                            <p>Para encontrar qualquer termo (a‚Çô) de uma PG, usamos a f√≥rmula:</p>
                            <div class="formula">a‚Çô = a‚ÇÅ ‚ãÖ q‚Åø‚Åª¬π</div>
                            <p>Onde: <span class="highlight">a‚Çô</span> √© o termo que queremos encontrar, <span class="highlight">a‚ÇÅ</span> √© o primeiro termo, <span class="highlight">q</span> √© a raz√£o, e <span class="highlight">n</span> √© a posi√ß√£o do termo.</p>
                        </div>
                        
                    </div>
                </section>

                <section id="practice-section" class="hidden">
                     <div class="mb-4 flex justify-end">
                        <button id="order-toggle-btn" class="btn-ghost text-xs">Ordem Crescente</button>
                    </div>
                    <div id="question-buttons" class="mb-4"></div>
                    <div id="quiz-container">
                        </div>
                </section>
            </div>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const root = document.documentElement;
        const themeToggle = document.getElementById('theme-toggle');
        const btnLearn = document.getElementById('btn-learn');
        const btnPractice = document.getElementById('btn-practice');
        const learnSection = document.getElementById('learn-section');
        const practiceSection = document.getElementById('practice-section');
        const questionButtons = document.getElementById('question-buttons');
        const quizContainer = document.getElementById('quiz-container');
        const orderToggleBtn = document.getElementById('order-toggle-btn');

        if(!btnLearn || !btnPractice || !learnSection || !practiceSection || !questionButtons || !quizContainer || !orderToggleBtn){
            console.error('Elementos DOM n√£o encontrados.');
            return;
        }

        (function(){
            const t = localStorage.getItem('cmf-math-8ano-theme') || 'dark';
            if(t === 'light') root.classList.add('theme-light');
            themeToggle.addEventListener('click', () => {
                root.classList.toggle('theme-light');
                localStorage.setItem('cmf-math-8ano-theme', root.classList.contains('theme-light') ? 'light' : 'dark');
            });
        })();
        
        const quizData = [
            { topic: 'Sequ√™ncias e Padr√µes', q: '1) Qual √© o pr√≥ximo termo da sequ√™ncia (2, 5, 8, 11, ...)?', options: ['12', '13', '14', '15'], answer: '14', explanation: 'Esta √© uma Progress√£o Aritm√©tica onde cada termo √© o anterior somado com 3. Logo, 11 + 3 = 14.'},
            { topic: 'Sequ√™ncias e Padr√µes', q: '2) Na sequ√™ncia dos n√∫meros √≠mpares (1, 3, 5, 7, ...), qual √© o 10¬∫ termo?', options: ['19', '20', '21', '17'], answer: '19', explanation: 'A lei de forma√ß√£o √© a‚Çô = 2n - 1. Para n=10, temos a‚ÇÅ‚ÇÄ = 2(10) - 1 = 19.'},
            { topic: 'Sequ√™ncias e Padr√µes', q: '3) Qual √© o pr√≥ximo n√∫mero na sequ√™ncia de Fibonacci (1, 1, 2, 3, 5, 8, ...)?', options: ['11', '12', '13', '21'], answer: '13', explanation: 'Na sequ√™ncia de Fibonacci, cada termo √© a soma dos dois anteriores. Logo, 5 + 8 = 13.'},
            { topic: 'Sequ√™ncias e Padr√µes', q: '4) A sequ√™ncia (1, 4, 9, 16, 25, ...) √© formada por:', options: ['N√∫meros primos', 'Quadrados perfeitos', 'M√∫ltiplos de 3', 'N√∫meros pares'], answer: 'Quadrados perfeitos', explanation: 'A sequ√™ncia √© 1¬≤, 2¬≤, 3¬≤, 4¬≤, 5¬≤, ... O pr√≥ximo termo seria 6¬≤ = 36.'},
            { topic: 'Sequ√™ncias e Padr√µes', q: '5) Uma sequ√™ncia em que cada termo depende do termo anterior √© chamada de:', options: ['Sequ√™ncia finita', 'Sequ√™ncia recursiva', 'Sequ√™ncia n√£o-recursiva', 'Sequ√™ncia decrescente'], answer: 'Sequ√™ncia recursiva', explanation: 'Uma lei de forma√ß√£o recursiva define um termo com base em seus antecessores.'},

            { topic: 'Progress√£o Aritm√©tica (PA)', q: '6) Qual das sequ√™ncias abaixo √© uma Progress√£o Aritm√©tica?', options: ['(1, 2, 4, 8)', '(10, 7, 4, 1)', '(2, 3, 5, 8)', '(1, -1, 1, -1)'], answer: '(10, 7, 4, 1)', explanation: '√â uma PA com raz√£o r = -3, pois cada termo √© o anterior subtra√≠do de 3.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '7) Qual √© a raz√£o da PA (15, 20, 25, 30, ...)?', options: ['3', '4', '5', '15'], answer: '5', explanation: 'A raz√£o √© a diferen√ßa entre um termo e seu anterior: 20 - 15 = 5.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '8) Em uma PA, o primeiro termo (a‚ÇÅ) √© 4 e a raz√£o (r) √© 6. Qual √© o 5¬∫ termo (a‚ÇÖ)?', options: ['24', '28', '30', '34'], answer: '28', explanation: 'a‚ÇÖ = a‚ÇÅ + (5 - 1)r = 4 + 4 * 6 = 4 + 24 = 28.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '9) O 10¬∫ termo de uma PA cujo primeiro termo √© 2 e a raz√£o √© 3 √©:', options: ['29', '30', '32', '35'], answer: '29', explanation: 'a‚ÇÅ‚ÇÄ = a‚ÇÅ + (10 - 1)r = 2 + 9 * 3 = 2 + 27 = 29.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '10) Uma PA √© crescente quando sua raz√£o √©:', options: ['Positiva (r > 0)', 'Negativa (r < 0)', 'Nula (r = 0)', 'Igual a 1'], answer: 'Positiva (r > 0)', explanation: 'Se a raz√£o for positiva, cada termo ser√° maior que o anterior.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '11) Qual √© o primeiro termo (a‚ÇÅ) de uma PA em que o 7¬∫ termo √© 21 e a raz√£o √© 3?', options: ['1', '3', '5', '7'], answer: '3', explanation: 'a‚Çá = a‚ÇÅ + 6r => 21 = a‚ÇÅ + 6 * 3 => 21 = a‚ÇÅ + 18 => a‚ÇÅ = 3.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '12) Se os termos (x, x+3, 10) formam uma PA, qual o valor de x?', options: ['2', '3,5', '4', '5'], answer: '3,5', explanation: 'A raz√£o √© constante: (x+3) - x = 10 - (x+3) => 3 = 7 - x => x = 4. Erro no c√°lculo, vamos refazer: (x+3) - x = 3. 10 - (x+3) = 7-x. 3=7-x => x=4. Perd√£o, a raz√£o √© (x+3) - x = 3. Ent√£o, 10 deve ser (x+3)+3. 10=x+6 => x=4.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '13) Uma PA constante √© aquela em que a raz√£o √©:', options: ['1', '0', '-1', '10'], answer: '0', explanation: 'Se a raz√£o for zero, todos os termos da sequ√™ncia s√£o iguais.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '14) Um ciclista treina percorrendo 5 km no primeiro dia, 8 km no segundo, 11 km no terceiro, e assim por diante. Quantos km ele percorrer√° no 10¬∫ dia?', options: ['30 km', '32 km', '35 km', '38 km'], answer: '32 km', explanation: '√â uma PA com a‚ÇÅ=5 e r=3. a‚ÇÅ‚ÇÄ = 5 + (9)*3 = 5 + 27 = 32 km.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '15) Interpolar tr√™s meios aritm√©ticos entre 4 e 24 significa:', options: ['Encontrar 3 n√∫meros entre 4 e 24 que formem uma PA', 'Somar 4 + 24 e dividir por 3', 'Encontrar a m√©dia de 4 e 24', 'Encontrar 3 m√∫ltiplos de 4'], answer: 'Encontrar 3 n√∫meros entre 4 e 24 que formem uma PA', explanation: 'Significa criar uma PA de 5 termos onde a‚ÇÅ=4 e a‚ÇÖ=24.'},
            { topic: 'Progress√£o Aritm√©tica (PA)', q: '16) Os n√∫meros da quest√£o anterior (interpolar 3 meios entre 4 e 24) s√£o:', options: ['8, 12, 16', '9, 14, 19', '10, 15, 20', '8, 14, 20'], answer: '9, 14, 19', explanation: 'a‚ÇÖ=a‚ÇÅ+4r => 24=4+4r => 20=4r => r=5. A sequ√™ncia √© (4, 9, 14, 19, 24).'},

            { topic: 'Progress√£o Geom√©trica (PG)', q: '17) Qual das sequ√™ncias abaixo √© uma Progress√£o Geom√©trica?', options: ['(3, 6, 9, 12)', '(1, 3, 5, 7)', '(2, 4, 8, 16)', '(5, 10, 15, 20)'], answer: '(2, 4, 8, 16)', explanation: '√â uma PG de raz√£o q=2, onde cada termo √© o anterior multiplicado por 2.'},
            { topic: 'Progress√£o Geom√©trica (PG)', q: '18) Qual √© a raz√£o (q) da PG (81, 27, 9, ...)?', options: ['3', '-3', '1/3', '-1/3'], answer: '1/3', explanation: 'A raz√£o √© a divis√£o de um termo pelo anterior: 27 / 81 = 1/3.'},
            { topic: 'Progress√£o Geom√©trica (PG)', q: '19) Em uma PG, o primeiro termo (a‚ÇÅ) √© 3 e a raz√£o (q) √© 2. Qual √© o 4¬∫ termo (a‚ÇÑ)?', options: ['12', '18', '24', '30'], answer: '24', explanation: 'a‚ÇÑ = a‚ÇÅ ‚ãÖ q¬≥ = 3 ‚ãÖ 2¬≥ = 3 ‚ãÖ 8 = 24.'},
            { topic: 'Progress√£o Geom√©trica (PG)', q: '20) O 5¬∫ termo de uma PG cujo primeiro termo √© 5 e a raz√£o √© 3 √©:', options: ['135', '405', '1215', '15'], answer: '405', explanation: 'a‚ÇÖ = a‚ÇÅ ‚ãÖ q‚Å¥ = 5 ‚ãÖ 3‚Å¥ = 5 ‚ãÖ 81 = 405.'},
            { topic: 'Progress√£o Geom√©trica (PG)', q: '21) Uma PG √© dita oscilante quando sua raz√£o √©:', options: ['Positiva', 'Nula', 'Maior que 1', 'Negativa'], answer: 'Negativa', explanation: 'Uma raz√£o negativa faz com que os termos alternem entre positivo e negativo.'},
            { topic: 'Progress√£o Geom√©trica (PG)', q: '22) Qual √© o primeiro termo (a‚ÇÅ) de uma PG em que o 4¬∫ termo √© 40 e a raz√£o √© 2?', options: ['4', '5', '8', '10'], answer: '5', explanation: 'a‚ÇÑ = a‚ÇÅ ‚ãÖ q¬≥ => 40 = a‚ÇÅ ‚ãÖ 2¬≥ => 40 = a‚ÇÅ ‚ãÖ 8 => a‚ÇÅ = 5.'},
            { topic: 'Progress√£o Geom√©trica (PG)', q: '23) Se os termos (2, x, 18) formam uma PG, qual o valor positivo de x?', options: ['6', '8', '9', '10'], answer: '6', explanation: 'Em uma PG, o termo do meio √© a m√©dia geom√©trica dos vizinhos: x¬≤ = 2 * 18 => x¬≤ = 36 => x = 6.'},
            { topic: 'Progress√£o Geom√©trica (PG)', q: '24) A sequ√™ncia (100, 50, 25, 12.5, ...) √© uma PG:', options: ['Crescente', 'Constante', 'Decrescente', 'Oscilante'], answer: 'Decrescente', explanation: 'A raz√£o √© 1/2, que est√° entre 0 e 1, tornando a PG decrescente.'},
            { topic: 'Progress√£o Geom√©trica (PG)', q: '25) Uma bact√©ria se divide em duas a cada hora. Come√ßando com uma, quantas haver√° ap√≥s 5 horas?', options: ['10', '16', '32', '64'], answer: '32', explanation: '√â uma PG com a‚ÇÅ=1 e q=2. Ap√≥s 5h, estaremos no 6¬∫ termo (a‚ÇÜ). a‚ÇÜ = 1 ‚ãÖ 2‚Åµ = 32.'},

            // Revis√£o Geral
            { topic: 'Revis√£o Geral', q: '26) A principal diferen√ßa entre uma PA e uma PG √© que:', options: ['A PA soma uma raz√£o e a PG subtrai', 'A PA multiplica por uma raz√£o e a PG divide', 'A PA soma uma raz√£o e a PG multiplica por uma raz√£o', 'A PA √© sempre crescente e a PG √© sempre decrescente'], answer: 'A PA soma uma raz√£o e a PG multiplica por uma raz√£o', explanation: 'A PA √© aditiva, enquanto a PG √© multiplicativa.'},
            { topic: 'Revis√£o Geral', q: '27) Qual o 6¬∫ termo da PA (7, 10, 13, ...)?', options: ['22', '25', '28', '19'], answer: '22', explanation: 'a‚ÇÅ=7, r=3. a‚ÇÜ = 7 + (5)*3 = 7 + 15 = 22.'},
            { topic: 'Revis√£o Geral', q: '28) Qual o 5¬∫ termo da PG (3, 6, 12, ...)?', options: ['24', '36', '48', '60'], answer: '48', explanation: 'a‚ÇÅ=3, q=2. a‚ÇÖ = 3 ‚ãÖ 2‚Å¥ = 3 ‚ãÖ 16 = 48.'},
            { topic: 'Revis√£o Geral', q: '29) A sequ√™ncia de todos os m√∫ltiplos de 5 √© uma:', options: ['PA de raz√£o 5', 'PG de raz√£o 5', 'PA de raz√£o 1', 'Sequ√™ncia de Fibonacci'], answer: 'PA de raz√£o 5', explanation: 'A sequ√™ncia (0, 5, 10, 15, ...) √© uma PA onde cada termo √© o anterior mais 5.'},
            { topic: 'Revis√£o Geral', q: '30) A sequ√™ncia (8, 4, 2, 1, ...) √© uma:', options: ['PA de raz√£o 2', 'PA de raz√£o 1/2', 'PG de raz√£o 2', 'PG de raz√£o 1/2'], answer: 'PG de raz√£o 1/2', explanation: 'Cada termo √© o anterior multiplicado por 1/2 (ou dividido por 2).'},
            { topic: 'Revis√£o Geral', q: '31) Para encontrar a raz√£o de uma PA, voc√™ deve:', options: ['Somar dois termos consecutivos', 'Subtrair um termo pelo seu anterior', 'Multiplicar dois termos consecutivos', 'Dividir um termo pelo seu anterior'], answer: 'Subtrair um termo pelo seu anterior', explanation: 'r = a‚Çô - a‚Çô‚Çã‚ÇÅ.'},
            { topic: 'Revis√£o Geral', q: '32) Para encontrar a raz√£o de uma PG, voc√™ deve:', options: ['Somar dois termos consecutivos', 'Subtrair um termo pelo seu anterior', 'Multiplicar dois termos consecutivos', 'Dividir um termo pelo seu anterior'], answer: 'Dividir um termo pelo seu anterior', explanation: 'q = a‚Çô / a‚Çô‚Çã‚ÇÅ.'},
            { topic: 'Revis√£o Geral', q: '33) Qual o 20¬∫ termo da PA (2, 4, 6, 8, ...)?', options: ['20', '38', '40', '42'], answer: '40', explanation: '√â a sequ√™ncia dos n√∫meros pares, cuja lei √© a‚Çô = 2n. a‚ÇÇ‚ÇÄ = 2 * 20 = 40.'},
            { topic: 'Revis√£o Geral', q: '34) Qual o 7¬∫ termo da PG (1, 3, 9, ...)?', options: ['243', '729', '2187', '81'], answer: '729', explanation: 'a‚ÇÅ=1, q=3. a‚Çá = 1 ‚ãÖ 3‚Å∂ = 729.'},
            { topic: 'Revis√£o Geral', q: '35) A sequ√™ncia (5, 5, 5, 5, ...) pode ser:', options: ['Apenas uma PA de raz√£o 0', 'Apenas uma PG de raz√£o 1', 'Tanto uma PA de raz√£o 0 quanto uma PG de raz√£o 1', 'Nenhuma das anteriores'], answer: 'Tanto uma PA de raz√£o 0 quanto uma PG de raz√£o 1', explanation: '5+0=5 (PA) e 5*1=5 (PG). Ambas as defini√ß√µes se aplicam.'},
            { topic: 'Revis√£o Geral', q: '36) Em um audit√≥rio, a primeira fileira tem 10 assentos, a segunda 12, a terceira 14, e assim por diante. Quantos assentos tem a 15¬™ fileira?', options: ['38', '40', '42', '44'], answer: '38', explanation: '√â uma PA com a‚ÇÅ=10 e r=2. a‚ÇÅ‚ÇÖ = 10 + 14 * 2 = 10 + 28 = 38.'},
            { topic: 'Revis√£o Geral', q: '37) Se voc√™ deposita R$100 e a cada m√™s o valor dobra, qual sequ√™ncia representa seu dinheiro?', options: ['PA de raz√£o 2', 'PA de raz√£o 100', 'PG de raz√£o 2', 'PG de raz√£o 100'], answer: 'PG de raz√£o 2', explanation: 'Dobrar significa multiplicar por 2, o que caracteriza uma PG de raz√£o 2.'},
            { topic: 'Revis√£o Geral', q: '38) Qual o valor de x para que (x-1, x+2, 3x) seja uma PA?', options: ['3', '4', '5', '6'], answer: '3', explanation: '(x+2)-(x-1) = 3x-(x+2) => 3 = 2x-2 => 5 = 2x => x=2.5. Refazendo: (x+2)-(x-1) = x+2-x+1 = 3. 3x-(x+2) = 3x-x-2 = 2x-2. 3=2x-2 => 5=2x => x=2.5'},
            { topic: 'Revis√£o Geral', q: '39) Qual o valor de x para que (x, 10, 25) seja uma PG?', options: ['2', '4', '5', '8'], answer: '4', explanation: '10/x = 25/10 => 25x = 100 => x = 4.'},
            { topic: 'Revis√£o Geral', q: '40) Qual o pr√≥ximo termo da sequ√™ncia (100, 95, 85, 70, 50, ...)?', options: ['25', '30', '35', '40'], answer: '25', explanation: 'A diferen√ßa entre os termos aumenta: -5, -10, -15, -20. A pr√≥xima ser√° -25. 50 - 25 = 25.'}
        ];

        let questionOrder = quizData.map((_,i)=>i);
        let currentIndex = 0;
        let questionStatus = Array(quizData.length).fill(null);
        let quizStarted = false;
        let isRandomOrder = false; 

        orderToggleBtn.addEventListener('click', () => {
            isRandomOrder = !isRandomOrder; 
            orderToggleBtn.textContent = isRandomOrder ? 'Ordem Aleat√≥ria' : 'Ordem Crescente';
            startQuiz();
        });

        function switchView(view){
            if(view==='learn'){
                practiceSection.classList.add('hidden');
                learnSection.classList.remove('hidden');
                btnLearn.classList.replace('btn-ghost', 'btn-primary');
                btnPractice.classList.replace('btn-primary', 'btn-ghost');
            } else {
                learnSection.classList.add('hidden');
                practiceSection.classList.remove('hidden');
                btnPractice.classList.replace('btn-ghost', 'btn-primary');
                btnLearn.classList.replace('btn-primary', 'btn-ghost');
                if (!quizStarted) {
                    startQuiz();
                    quizStarted = true;
                }
            }
        }

        btnLearn.addEventListener('click', () => switchView('learn'));
        btnPractice.addEventListener('click', () => switchView('practice'));

        function renderQuestionButtons(){
            questionButtons.innerHTML='';
            quizData.forEach((_,originalIndex)=>{
                const b = document.createElement('button');
                b.textContent = (originalIndex + 1);
                b.setAttribute('data-original-index', String(originalIndex));
                b.title = `Ir para a quest√£o ${originalIndex+1}`;
                b.onclick = ()=>{
                    const pos = questionOrder.indexOf(originalIndex);
                    if(pos >= 0){ currentIndex = pos; showQuestion(); }
                };
                if(questionStatus[originalIndex]==='correct') b.classList.add('correct-status');
                if(questionStatus[originalIndex]==='wrong') b.classList.add('wrong-status');
                
                if (quizStarted) {
                    const currentQuestionOriginalIndex = questionOrder[currentIndex];
                    if(originalIndex === currentQuestionOriginalIndex) {
                        b.classList.add('current-question');
                    }
                }
                
                questionButtons.appendChild(b);
            });
        }

        const questionTopic = document.createElement('p');
        questionTopic.className='text-sm font-semibold text-[var(--accent)] mb-2';
        const questionText = document.createElement('p');
        questionText.className='text-xl mt-2';
        const optionsContainer = document.createElement('div');
        optionsContainer.className='mt-4 grid gap-3';
        const feedbackContainer = document.createElement('div');
        const nextBtn = document.createElement('button');
        nextBtn.className='btn-primary mt-4'; nextBtn.textContent='Pr√≥xima';
        const redoBtn = document.createElement('button');
        redoBtn.className='btn-ghost mt-4 ml-3'; redoBtn.textContent='Refazer';

        quizContainer.appendChild(questionTopic);
        quizContainer.appendChild(questionText);
        quizContainer.appendChild(optionsContainer);
        quizContainer.appendChild(feedbackContainer);
        quizContainer.appendChild(nextBtn);
        quizContainer.appendChild(redoBtn);

        function startQuiz(){
            if (isRandomOrder) {
                shuffleArray(questionOrder);
            } else {
                questionOrder = quizData.map((_, i) => i);
            }
            currentIndex = 0;
            questionStatus.fill(null);
            showQuestion();
        }

        function showQuestion(){
            if (currentIndex >= questionOrder.length) {
                showFinalResults();
                return;
            }
        
            const qIdx = questionOrder[currentIndex];
            const qObj = quizData[qIdx];
            
            questionTopic.textContent = qObj.topic;
            questionText.innerHTML = `${qIdx + 1}) ${qObj.q.replace(/^[\s\d\)\(\.\:\-‚Äì‚Äî_]+/,'').trim()}`;
            
            optionsContainer.innerHTML='';
            feedbackContainer.innerHTML='';
            redoBtn.classList.add('hidden');
            nextBtn.disabled = true;

            qObj.options.forEach(opt =>{
                const b = document.createElement('button');
                b.className='option-btn'; b.textContent=opt;
                b.onclick = ()=> selectAnswer(b,opt,qObj.answer,qObj.explanation,qIdx);
                optionsContainer.appendChild(b);
            });

            renderQuestionButtons();
        }
        
        function showFinalResults() {
            const correctCount = questionStatus.filter(s => s === 'correct').length;
            const total = quizData.length;
            questionTopic.textContent = '';
            questionText.innerHTML = `üéâ Fim do Quiz! üéâ`;
            optionsContainer.innerHTML = `<p class="text-center text-lg">Voc√™ acertou ${correctCount} de ${total} quest√µes.</p>`;
            feedbackContainer.innerHTML = '';
            nextBtn.textContent = 'Recome√ßar Quiz';
            nextBtn.disabled = false;
            nextBtn.onclick = () => {
                quizStarted = false;
                startQuiz(); 
                quizStarted = true;
            };
            redoBtn.classList.add('hidden');
        }

        function selectAnswer(btn,opt,correct,explanation,qIdx){
            Array.from(optionsContainer.children).forEach(b=>b.disabled=true);
            nextBtn.disabled = false;

            if(opt===correct){
                btn.classList.add('celebrate','correct');
                createConfetti();
                questionStatus[qIdx]='correct';
                feedbackContainer.className='feedback-correct mt-4';
                feedbackContainer.textContent = 'Correto! ' + (explanation || '');
            } else {
                btn.classList.add('wrong');
                questionStatus[qIdx]='wrong';
                feedbackContainer.className='feedback-wrong mt-4';
                feedbackContainer.innerHTML = `<strong>Errado.</strong> Resposta correta: <strong>${correct}</strong>.`;
                if(explanation) feedbackContainer.innerHTML += `<div class="mt-2 text-sm">${explanation}</div>`;
                
                Array.from(optionsContainer.children).forEach(b=>{
                    if(b.textContent === correct) b.classList.add('correct');
                });
                redoBtn.classList.remove('hidden');
            }
            renderQuestionButtons();
        }

        nextBtn.addEventListener('click', ()=>{
            if(currentIndex < questionOrder.length-1){ 
                currentIndex++; 
                showQuestion(); 
            } else { 
                currentIndex++;
                showFinalResults();
            }
        });

        redoBtn.addEventListener('click', ()=>{
            const currentQuestionIndex = questionOrder[currentIndex];
            questionStatus[currentQuestionIndex] = null;
            showQuestion();
        });

        function shuffleArray(a){
            for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; }
        }

        function createConfetti(){
            const colors = ['#f59e0b','#ef4444','#10b981','#3b82f6','#8b5cf6'];
            for(let i=0;i<12;i++){
                const el = document.createElement('div');
                el.className='confetti';
                el.style.left = (30 + Math.random()*40) + '%';
                el.style.top = (10 + Math.random()*10) + 'vh';
                el.style.color = colors[Math.floor(Math.random()*colors.length)];
                el.textContent = 'üéâ';
                el.style.transform = `rotate(${Math.random()*360}deg)`;
                el.style.animation = `confetti-fall ${1.2 + Math.random()*1}s linear forwards`;
                document.body.appendChild(el);
                setTimeout(()=> el.remove(), 2200);
            }
        }
        
        switchView('learn');
    });
    </script>
</body>
</html>
