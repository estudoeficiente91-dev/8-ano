<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>√Åreas e Medidas ‚Äì 8¬∫ Ano</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root{
            --bg:#071023; --card:#0b1624; --accent:#3b82f6; --muted:#97a6bf; --text:#e6eef8; --success:#34d399; --danger:#ef4444; --border:rgba(255,255,255,0.12); --muted-2: rgba(230,238,248,0.85);
        }
        html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); color:var(--text);}
        .container{max-width:980px;margin:28px auto;padding:18px}
        .page-header{ padding:1.25rem; border-radius:12px; background: linear-gradient(180deg, rgba(59,130,246,0.06), transparent); box-shadow: 0 8px 24px rgba(2,6,23,0.6); }
        .card{ background: var(--card); color: var(--text); border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 6px 20px rgba(2,6,23,0.6); padding:18px }
        .btn-primary{ background: linear-gradient(90deg,var(--accent), #3b82f6); color: #061226; padding: .5rem 1.25rem; border-radius: 10px; border: 1px solid rgba(255,255,255,0.4); box-shadow: 0 6px 18px rgba(59,130,246,0.12); cursor: pointer; }
        .btn-ghost{ background: transparent; color: var(--muted-2); padding: .45rem .9rem; border-radius: 10px; border: 1px solid var(--border); cursor:pointer; }
        .option-btn{ display:block; width:100%; text-align:left; padding:.75rem 1rem; border-radius:10px; background: rgba(255,255,255,0.02); border:1px solid var(--border); color:var(--muted-2); cursor:pointer; transition: transform 150ms ease, background 150ms ease; }
        .option-btn:hover:not(:disabled){ background: rgba(255,255,255,0.035); transform: translateY(-1px); }
        .option-btn.correct{ background: var(--success) !important; color: #062e1f !important; border-color: rgba(4,120,87,0.18) !important; }
        .option-btn.wrong{ background: var(--danger) !important; color: #fff !important; border-color: rgba(185,28,28,0.18) !important; }
        .option-btn:disabled { cursor: not-allowed; }
        #question-buttons{ display:flex; flex-wrap:wrap; gap:8px; }
        #question-buttons button{ background: transparent; color: var(--muted-2); border:1px solid var(--border); padding:.45rem .6rem; border-radius:8px; cursor:pointer; }
        #question-buttons button.current-question { background-color: rgba(59, 130, 246, 0.2); border-color: var(--accent); }
        #question-buttons button.correct-status { background-color: var(--success); color: #062e1f; border-color: var(--success); }
        #question-buttons button.wrong-status { background-color: var(--danger); color: white; border-color: var(--danger); }
        .feedback-correct{ background: rgba(16,185,129,0.12); border:1px solid rgba(16,185,129,0.22); color: #bbf7d0; padding:12px; border-radius:8px }
        .feedback-wrong{ background: rgba(239,68,68,0.12); border:1px solid rgba(239,68,68,0.22); color: #ffdede; padding:12px; border-radius:8px }
        .celebrate{ animation: pop 480ms cubic-bezier(.2,.9,.3,1); box-shadow: 0 12px 36px rgba(96,165,250,0.18), 0 0 28px rgba(16,185,129,0.12); }
        @keyframes pop{ 0%{ transform: scale(1); } 50%{ transform: scale(1.08); } 100%{ transform: scale(1); } }
        .confetti{ position: fixed; z-index: 9999; pointer-events: none; font-size: 18px; opacity: 1; transform-origin: center; }
        @keyframes confetti-fall { 0%{ transform: translateY(-10vh) rotate(0deg); opacity:1 } 100%{ transform: translateY(100vh) rotate(540deg); opacity:0 } }
        .theme-light{ --bg: #f8fafc; --card: #ffffff; --muted: #475569; --text: #0f1724; --accent: #0284c7; --success: #047857; --danger: #b91c1c; --border: rgba(15,23,42,0.1); --muted-2: rgba(15,23,36,0.85); }
        .topic-section { margin-bottom: 2.5rem; border-left: 3px solid var(--accent); padding-left: 1.5rem; }
        .topic-title { font-size: 1.5rem; font-weight: 700; color: var(--accent); margin-bottom: 1rem; }
        .sub-topic-title { font-size: 1.15rem; font-weight: 600; color: var(--text); margin-top: 1.5rem; margin-bottom: 0.75rem; }
        .topic-section p, .topic-section ul { font-size: 1rem; color: var(--muted-2); line-height: 1.7; text-align: justify; }
        .topic-section ul { list-style-position: inside; list-style-type: disc; margin-top: 0.5rem; padding-left: 1rem;}
        .highlight { background-color: rgba(59, 130, 246, 0.1); padding: 0.2rem 0.4rem; border-radius: 4px; font-weight: 600; color: var(--accent); }
        .formula { background-color: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px; margin-top: 1rem; font-family: 'Courier New', Courier, monospace; text-align: center; font-size: 1.1rem; }
        .difficulty-badge { padding: 0.1rem 0.6rem; border-radius: 99px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
        .difficulty-facil { background-color: rgba(52, 211, 153, 0.2); color: #6ee7b7; }
        .difficulty-medio { background-color: rgba(250, 204, 21, 0.2); color: #facc15; }
        .difficulty-dificil { background-color: rgba(248, 113, 113, 0.2); color: #f87171; }
    </style>
</head>
<body class="antialiased">
    <div class="container">
        <header class="page-header">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold">Matem√°tica ‚Äî 8¬∫ Ano</h1>
                    <p class="text-sm text-slate-400">Guia de estudos: √Åreas, Medidas e Circunfer√™ncia.</p>
                </div>
                <div>
                    <button id="theme-toggle" class="btn-ghost">Tema</button>
                </div>
            </div>
        </header>

        <main class="mt-6">
            <div class="card">
                <nav class="mb-4">
                    <button id="btn-learn" class="btn-primary">Aprender</button>
                    <button id="btn-practice" class="btn-ghost ml-2">Praticar</button>
                </nav>

                <section id="learn-section">
                    <div class="space-y-8">
                        
                        <div class="topic-section">
                            <h2 class="topic-title">Medidas de Superf√≠cie e Agr√°rias</h2>
                            <p>Medidas de superf√≠cie s√£o usadas para calcular a <span class="highlight">√°rea</span> de um espa√ßo. A unidade padr√£o do Sistema Internacional (SI) √© o <span class="highlight">metro quadrado (m¬≤)</span>.</p>
                            <p>Para converter unidades de √°rea, usamos a escala (km¬≤, hm¬≤, dam¬≤, m¬≤, dm¬≤, cm¬≤, mm¬≤). Como a unidade √© ao quadrado (¬≤), cada "salto" na escala multiplica ou divide por <span class="highlight">100</span> (10¬≤).</p>
                             <h3 class="sub-topic-title">Exemplos de Convers√£o</h3>
                            <ul>
                                <li><strong>m¬≤ para cm¬≤:</strong> 2 m¬≤ = ? cm¬≤. De 'm' para 'cm' s√£o 2 saltos para a direita. Em √°rea, multiplicamos por 100 duas vezes. (2 x 100 x 100) = <span class="highlight">20.000 cm¬≤</span>.</li>
                                <li><strong>km¬≤ para m¬≤:</strong> 3 km¬≤ = ? m¬≤. De 'km' para 'm' s√£o 3 saltos. Multiplicamos por 100 tr√™s vezes. (3 x 100 x 100 x 100) = <span class="highlight">3.000.000 m¬≤</span>.</li>
                            </ul>
                             <h3 class="sub-topic-title">Medidas Agr√°rias</h3>
                            <p>S√£o medidas usadas especificamente para grandes √°reas de terra, como fazendas.</p>
                            <ul>
                                <li><strong>Hectare (ha):</strong> √â a medida mais comum. 1 hectare equivale a <span class="highlight">10.000 m¬≤</span>. √â o mesmo que a √°rea de um quadrado com 100 metros de lado.</li>
                                <li><strong>Alqueire:</strong> √â uma medida vari√°vel. O <span class="highlight">Alqueire Paulista</span>, por exemplo, vale 24.200 m¬≤. O <span class="highlight">Alqueire Mineiro</span> vale 48.400 m¬≤.</li>
                            </ul>
                        </div>
                        
                        <div class="topic-section">
                             <h2 class="topic-title">√Åreas de Figuras Planas</h2>
                             <p>Calcular a √°rea √© medir o espa√ßo interno de uma figura. Cada figura tem sua pr√≥pria f√≥rmula.</p>
                             <ul>
                                <li><strong>Quadrado:</strong> Lado vezes Lado. <span class="formula">A = L¬≤</span></li>
                                <li><strong>Ret√¢ngulo:</strong> Base vezes Altura. <span class="formula">A = b ‚ãÖ h</span></li>
                                <li><strong>Tri√¢ngulo:</strong> Base vezes Altura, dividido por 2. <span class="formula">A = (b ‚ãÖ h) / 2</span></li>
                                <li><strong>Losango:</strong> Diagonal maior vezes Diagonal menor, dividido por 2. <span class="formula">A = (D ‚ãÖ d) / 2</span></li>
                                <li><strong>Trap√©zio:</strong> (Base maior + Base menor) vezes Altura, dividido por 2. <span class="formula">A = ((B + b) ‚ãÖ h) / 2</span></li>
                             </ul>
                        </div>

                        <div class="topic-section">
                            <h2 class="topic-title">Circunfer√™ncia e C√≠rculo</h2>
                            <p>A <span class="highlight">circunfer√™ncia</span> √© a linha do contorno. O <span class="highlight">c√≠rculo</span> √© toda a superf√≠cie interna (a √°rea).</p>
                            <ul>
                                <li><strong>Raio (r):</strong> A dist√¢ncia do centro a qualquer ponto da circunfer√™ncia.</li>
                                <li><strong>Di√¢metro (d):</strong> O segmento que atravessa o centro e vale o dobro do raio. <span class="highlight">d = 2r</span>.</li>
                                <li><strong>Corda:</strong> Qualquer segmento de reta que une dois pontos da circunfer√™ncia. O di√¢metro √© a maior corda poss√≠vel.</li>
                                <li><strong>Pi (œÄ):</strong> √â uma constante que vale aproximadamente <span class="highlight">3,14</span>.</li>
                             </ul>
                             <h3 class="sub-topic-title">F√≥rmulas Essenciais</h3>
                            <p><strong>Comprimento (Per√≠metro):</strong> √â o contorno da circunfer√™ncia.</p>
                             <p class="formula">C = 2 ‚ãÖ œÄ ‚ãÖ r</p>
                             <ul>
                                <li><strong>Exemplo:</strong> Um c√≠rculo com raio de 5 cm tem um comprimento de C = 2 ‚ãÖ 3,14 ‚ãÖ 5 = <span class="highlight">31,4 cm</span>.</li>
                             </ul>
                            <p><strong>√Årea:</strong> √â a medida da superf√≠cie do c√≠rculo.</p>
                             <p class="formula">A = œÄ ‚ãÖ r¬≤</p>
                             <ul>
                                <li><strong>Exemplo:</strong> Um c√≠rculo com raio de 5 cm tem uma √°rea de A = 3,14 ‚ãÖ 5¬≤ = 3,14 ‚ãÖ 25 = <span class="highlight">78,5 cm¬≤</span>.</li>
                             </ul>
                        </div>
                        
                    </div>
                </section>

                <section id="practice-section" class="hidden">
                     <div class="mb-4 flex justify-end">
                        <button id="order-toggle-btn" class="btn-ghost text-xs">Ordem Crescente</button>
                    </div>
                    <div id="question-buttons" class="mb-4"></div>
                    <div id="quiz-container">
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const root = document.documentElement;
        const themeToggle = document.getElementById('theme-toggle');
        const btnLearn = document.getElementById('btn-learn');
        const btnPractice = document.getElementById('btn-practice');
        const learnSection = document.getElementById('learn-section');
        const practiceSection = document.getElementById('practice-section');
        const questionButtons = document.getElementById('question-buttons');
        const quizContainer = document.getElementById('quiz-container');
        const orderToggleBtn = document.getElementById('order-toggle-btn');

        // Removido: btnFlashcards e flashcardSection
        // Removido: L√≥gica do Modo Flashcard

        if(!btnLearn || !btnPractice || !learnSection || !practiceSection || !questionButtons || !quizContainer || !orderToggleBtn){
            console.error('Elementos DOM n√£o encontrados.');
            return;
        }

        (function(){
            const t = localStorage.getItem('cmf-math-8ano-theme') || 'dark';
            if(t === 'light') root.classList.add('theme-light');
            themeToggle.addEventListener('click', () => {
                root.classList.toggle('theme-light');
                localStorage.setItem('cmf-math-8ano-theme', root.classList.contains('theme-light') ? 'light' : 'dark');
            });
        })();
        
        const quizData = [
            // √Åreas de Figuras Planas
            { topic: '√Årea do Quadrado', difficulty: 'F√°cil', q: '1) Qual a √°rea de um quadrado com lado de 5 cm?', options: ['20 cm¬≤', '25 cm¬≤', '10 cm¬≤', '50 cm¬≤'], answer: '25 cm¬≤', explanation: 'A √°rea do quadrado √© Lado x Lado. A = 5 * 5 = 25 cm¬≤.'},
            { topic: '√Årea do Ret√¢ngulo', difficulty: 'F√°cil', q: '2) Um campo de futebol tem 100 m de comprimento e 70 m de largura. Qual √© a sua √°rea?', options: ['340 m¬≤', '700 m¬≤', '7.000 m¬≤', '170 m¬≤'], answer: '7.000 m¬≤', explanation: 'A √°rea do ret√¢ngulo √© Base x Altura. A = 100 * 70 = 7.000 m¬≤.'},
            { topic: '√Årea do Tri√¢ngulo', difficulty: 'F√°cil', q: '3) Qual a √°rea de um tri√¢ngulo com base de 10 m e altura de 6 m?', options: ['30 m¬≤', '60 m¬≤', '16 m¬≤', '15 m¬≤'], answer: '30 m¬≤', explanation: 'A √°rea do tri√¢ngulo √© (Base x Altura) / 2. A = (10 * 6) / 2 = 30 m¬≤.'},
            { topic: '√Årea do Losango', difficulty: 'M√©dio', q: '4) Um losango tem uma diagonal maior de 10 cm e uma diagonal menor de 8 cm. Qual √© a sua √°rea?', options: ['80 cm¬≤', '18 cm¬≤', '40 cm¬≤', '20 cm¬≤'], answer: '40 cm¬≤', explanation: 'A √°rea do losango √© (Diagonal maior x Diagonal menor) / 2. A = (10 * 8) / 2 = 40 cm¬≤.'},
            { topic: '√Årea do Trap√©zio', difficulty: 'M√©dio', q: '5) Um trap√©zio tem base maior de 15 cm, base menor de 10 cm e altura de 8 cm. Qual √© a sua √°rea?', options: ['100 cm¬≤', '200 cm¬≤', '120 cm¬≤', '25 cm¬≤'], answer: '100 cm¬≤', explanation: 'A √°rea do trap√©zio √© ((Base maior + Base menor) * Altura) / 2. A = ((15 + 10) * 8) / 2 = (25 * 8) / 2 = 100 cm¬≤.'},

            // Circunfer√™ncia
            { topic: 'Circunfer√™ncia - Elementos', difficulty: 'F√°cil', q: '6) Como se chama o segmento de reta que une o centro a qualquer ponto da circunfer√™ncia?', options: ['Corda', 'Di√¢metro', 'Raio', 'Arco'], answer: 'Raio', explanation: 'Essa √© a defini√ß√£o de raio, a medida fundamental da circunfer√™ncia.'},
            { topic: 'Circunfer√™ncia - Elementos', difficulty: 'F√°cil', q: '7) Se o raio de uma circunfer√™ncia mede 6 cm, quanto mede o seu di√¢metro?', options: ['3 cm', '6 cm', '12 cm', '36 cm'], answer: '12 cm', explanation: 'O di√¢metro √© sempre o dobro do raio (d = 2r). d = 2 * 6 = 12 cm.'},
            { topic: 'Circunfer√™ncia - F√≥rmulas', difficulty: 'F√°cil', q: '8) Qual √© a f√≥rmula para calcular o comprimento (per√≠metro) de uma circunfer√™ncia?', options: ['C = œÄr¬≤', 'C = 2œÄr', 'C = œÄd¬≤', 'C = œÄr'], answer: 'C = 2œÄr', explanation: 'O comprimento √© duas vezes o Pi vezes o raio, ou Pi vezes o di√¢metro (C = œÄd).'},
            { topic: 'Circunfer√™ncia - F√≥rmulas', difficulty: 'F√°cil', q: '9) Qual √© a f√≥rmula para calcular a √°rea de um c√≠rculo?', options: ['A = 2œÄr', 'A = œÄd', 'A = œÄr¬≤', 'A = œÄ¬≤r'], answer: 'A = œÄr¬≤', explanation: 'A √°rea do c√≠rculo √© calculada por Pi multiplicado pelo raio ao quadrado.'},
            { topic: 'Circunfer√™ncia - C√°lculo de Comprimento', difficulty: 'M√©dio', q: '10) Qual o comprimento de uma roda com 20 cm de raio? (Use œÄ = 3,14)', options: ['62,8 cm', '125,6 cm', '314 cm', '1256 cm'], answer: '125,6 cm', explanation: 'C = 2 * œÄ * r = 2 * 3,14 * 20 = 125,6 cm.'},
            { topic: 'Circunfer√™ncia - C√°lculo de √Årea', difficulty: 'M√©dio', q: '11) Qual a √°rea de uma pizza com 10 cm de raio? (Use œÄ = 3,14)', options: ['31,4 cm¬≤', '62,8 cm¬≤', '314 cm¬≤', '78,5 cm¬≤'], answer: '314 cm¬≤', explanation: 'A = œÄ * r¬≤ = 3,14 * 10¬≤ = 3,14 * 100 = 314 cm¬≤.'},
            { topic: 'Circunfer√™ncia - C√°lculo de √Årea', difficulty: 'Dif√≠cil', q: '12) Se o comprimento de uma pra√ßa circular √© 188,4 m, qual √© a sua √°rea? (Use œÄ = 3,14)', options: ['900 m¬≤', '1800 m¬≤', '2826 m¬≤', '3140 m¬≤'], answer: '2826 m¬≤', explanation: 'Primeiro, achamos o raio: C = 2œÄr => 188,4 = 2 * 3,14 * r => 188,4 = 6,28 * r => r = 30 m. Agora a √°rea: A = œÄr¬≤ = 3,14 * 30¬≤ = 3,14 * 900 = 2826 m¬≤.'},
            
            // Medidas de Superf√≠cie e Agr√°rias
            { topic: 'Convers√£o de Medidas de Superf√≠cie', difficulty: 'M√©dio', q: '13) Uma sala tem 5 metros quadrados (m¬≤). Qual √© a sua √°rea em cent√≠metros quadrados (cm¬≤)?', options: ['500 cm¬≤', '5.000 cm¬≤', '50.000 cm¬≤', '500.000 cm¬≤'], answer: '50.000 cm¬≤', explanation: '1 m = 100 cm. Portanto, 1 m¬≤ = 100 cm * 100 cm = 10.000 cm¬≤. Logo, 5 m¬≤ = 5 * 10.000 = 50.000 cm¬≤.'},
            { topic: 'Convers√£o de Medidas de Superf√≠cie', difficulty: 'M√©dio', q: '14) Um parque tem 0,4 km¬≤. Qual √© a sua √°rea em metros quadrados (m¬≤)?', options: ['4.000 m¬≤', '40.000 m¬≤', '400.000 m¬≤', '4.000.000 m¬≤'], answer: '400.000 m¬≤', explanation: '1 km = 1000 m. Portanto, 1 km¬≤ = 1000m * 1000m = 1.000.000 m¬≤. Logo, 0,4 km¬≤ = 0,4 * 1.000.000 = 400.000 m¬≤.'},
            { topic: 'Medidas Agr√°rias', difficulty: 'F√°cil', q: '15) A medida agr√°ria chamada "hectare" (ha) equivale a quantos metros quadrados?', options: ['100 m¬≤', '1.000 m¬≤', '10.000 m¬≤', '100.000 m¬≤'], answer: '10.000 m¬≤', explanation: 'Um hectare √© a √°rea de um quadrado de 100m por 100m, totalizando 10.000 m¬≤.'},
            { topic: 'Medidas Agr√°rias', difficulty: 'M√©dio', q: '16) Um fazendeiro possui uma terra de 3,5 hectares. Qual a √°rea total em m¬≤?', options: ['350 m¬≤', '3.500 m¬≤', '35.000 m¬≤', '350.000 m¬≤'], answer: '35.000 m¬≤', explanation: 'Basta multiplicar o n√∫mero de hectares por 10.000: 3,5 * 10.000 = 35.000 m¬≤.'},
            { topic: 'Convers√£o de Medidas de Superf√≠cie', difficulty: 'Dif√≠cil', q: '17) Quantos azulejos quadrados de 25 cm de lado s√£o necess√°rios para cobrir um piso de 10 m¬≤?', options: ['100', '160', '1600', '400'], answer: '1600', explanation: '√Årea do piso = 10 m¬≤. √Årea do azulejo = 25cm * 25cm = 625 cm¬≤. Convertendo a √°rea do piso para cm¬≤: 10 m¬≤ = 100.000 cm¬≤. N√∫mero de azulejos = 100.000 / 625 = 1600.'},

            // Revis√£o Geral
            { topic: 'Revis√£o Geral', difficulty: 'F√°cil', q: '18) Um pneu de bicicleta tem 40 cm de raio. Qual o seu di√¢metro?', options: ['20 cm', '40 cm', '80 cm', '120 cm'], answer: '80 cm', explanation: 'O di√¢metro √© sempre o dobro do raio (d = 2r). d = 2 * 40 = 80 cm.'},
            { topic: 'Revis√£o Geral', difficulty: 'F√°cil', q: '19) Qual figura √© definida como "o conjunto de pontos equidistantes de um ponto central"?', options: ['Quadrado', 'Tri√¢ngulo', 'Raio', 'Circunfer√™ncia'], answer: 'Circunfer√™ncia', explanation: 'Essa √© a defini√ß√£o exata de uma circunfer√™ncia.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '20) A √°rea de um campo de futebol √© 7.000 m¬≤. Quantos hectares (ha) esse campo possui?', options: ['0,07 ha', '0,7 ha', '7 ha', '70 ha'], answer: '0,7 ha', explanation: 'Como 1 ha = 10.000 m¬≤, para converter m¬≤ para ha, dividimos por 10.000. 7.000 / 10.000 = 0,7 ha.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '21) Qual o per√≠metro de um losango cujo lado mede 6 cm?', options: ['12 cm', '18 cm', '24 cm', '36 cm'], answer: '24 cm', explanation: 'O losango √© um quadril√°tero com quatro lados iguais. O per√≠metro √© a soma dos lados: 4 * 6 = 24 cm.'},
            { topic: 'Revis√£o Geral', difficulty: 'Dif√≠cil', q: '22) A √°rea de um tri√¢ngulo √© 50 cm¬≤. Se a sua base mede 10 cm, qual √© a sua altura?', options: ['5 cm', '10 cm', '15 cm', '20 cm'], answer: '10 cm', explanation: 'A = (b * h) / 2 => 50 = (10 * h) / 2 => 100 = 10 * h => h = 10 cm.'},
            { topic: 'Revis√£o Geral', difficulty: 'F√°cil', q: '23) O que √© uma corda em uma circunfer√™ncia?', options: ['Um segmento que liga o centro a um ponto', 'Um segmento que liga dois pontos quaisquer da circunfer√™ncia', 'O dobro do raio', 'O contorno da circunfer√™ncia'], answer: 'Um segmento que liga dois pontos quaisquer da circunfer√™ncia', explanation: 'Essa √© a defini√ß√£o de corda. O di√¢metro √© um tipo especial de corda.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '24) Um terreno retangular tem 15m de largura e 300m¬≤ de √°rea. Qual o seu per√≠metro?', options: ['40 m', '55 m', '70 m', '315 m'], answer: '70 m', explanation: 'Primeiro, ache o comprimento: A = c * l => 300 = c * 15 => c = 20 m. O per√≠metro √© 2*(c+l) = 2*(20+15) = 2*35 = 70 m.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '25) Se o di√¢metro de uma pizza √© 30 cm, qual √© a sua √°rea? (Use œÄ = 3)', options: ['90 cm¬≤', '225 cm¬≤', '675 cm¬≤', '900 cm¬≤'], answer: '675 cm¬≤', explanation: 'Se o di√¢metro √© 30 cm, o raio √© 15 cm. A = œÄ * r¬≤ = 3 * 15¬≤ = 3 * 225 = 675 cm¬≤.'},
            { topic: 'Revis√£o Geral', difficulty: 'F√°cil', q: '26) 0,25 m¬≤ √© o mesmo que:', options: ['25 cm¬≤', '250 cm¬≤', '2.500 cm¬≤', '25.000 cm¬≤'], answer: '2.500 cm¬≤', explanation: '1 m¬≤ = 10.000 cm¬≤. Portanto, 0,25 m¬≤ √© um quarto de 10.000, que √© 2.500 cm¬≤.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '27) Um fazendeiro tem 2 hectares de planta√ß√£o de milho. Qual √© a √°rea em metros quadrados?', options: ['200 m¬≤', '2.000 m¬≤', '20.000 m¬≤', '200.000 m¬≤'], answer: '20.000 m¬≤', explanation: 'Se 1 hectare = 10.000 m¬≤, ent√£o 2 hectares = 20.000 m¬≤.'},
            { topic: 'Revis√£o Geral', difficulty: 'Dif√≠cil', q: '28) Um c√≠rculo tem √°rea de 100œÄ cm¬≤. Qual √© o seu comprimento?', options: ['10œÄ cm', '20œÄ cm', '50œÄ cm', '100œÄ cm'], answer: '20œÄ cm', explanation: 'A = œÄr¬≤ => 100œÄ = œÄr¬≤ => r¬≤ = 100 => r = 10 cm. O comprimento √© C = 2œÄr = 2 * œÄ * 10 = 20œÄ cm.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '29) Qual o per√≠metro de um trap√©zio is√≥sceles cujas bases medem 10m e 20m, e os lados n√£o paralelos medem 8m cada?', options: ['38 m', '46 m', '56 m', '160 m'], answer: '46 m', explanation: 'O per√≠metro √© a soma de todos os lados: 10 + 20 + 8 + 8 = 46 m.'},
            { topic: 'Revis√£o Geral', difficulty: 'F√°cil', q: '30) Um quadrado com 8 cm de lado e um ret√¢ngulo com lados 16 cm e 4 cm t√™m:', options: ['A mesma √°rea e o mesmo per√≠metro', 'A mesma √°rea, mas per√≠metros diferentes', 'O mesmo per√≠metro, mas √°reas diferentes', '√Åreas e per√≠metros diferentes'], answer: 'A mesma √°rea, mas per√≠metros diferentes', explanation: '√Årea do Quadrado = 8*8 = 64 cm¬≤. √Årea do Ret√¢ngulo = 16*4 = 64 cm¬≤. Per√≠metro do Quadrado = 4*8 = 32 cm. Per√≠metro do Ret√¢ngulo = 2*(16+4) = 40 cm.'}
        ];

        let questionOrder = quizData.map((_,i)=>i);
        let currentIndex = 0;
        let questionStatus = Array(quizData.length).fill(null);
        let quizStarted = false;
        let flashcardModeStarted = false;
        let isRandomOrder = false; 

        // DOM Elements for the quiz
        const questionInfoContainer = document.createElement('div');
        questionInfoContainer.className = 'flex justify-between items-center mb-2';
        const questionTopic = document.createElement('p');
        questionTopic.className='text-sm font-semibold text-[var(--accent)]';
        const questionDifficulty = document.createElement('span');
        const questionText = document.createElement('p');
        questionText.className='text-xl mt-2';
        const optionsContainer = document.createElement('div');
        optionsContainer.className='mt-4 grid gap-3';
        const feedbackContainer = document.createElement('div');
        const nextBtn = document.createElement('button');
        nextBtn.className='btn-primary mt-4 hidden';
        nextBtn.textContent='Pr√≥xima';
        const redoBtn = document.createElement('button');
        redoBtn.className='btn-ghost mt-4 ml-3 hidden';
        redoBtn.textContent='Refazer';

        quizContainer.appendChild(questionInfoContainer);
        quizContainer.appendChild(questionText);
        quizContainer.appendChild(optionsContainer);
        quizContainer.appendChild(feedbackContainer);
        quizContainer.appendChild(nextBtn);
        quizContainer.appendChild(redoBtn);
        
        function setupNavEvents() {
            btnLearn.addEventListener('click', () => switchView('learn'));
            btnPractice.addEventListener('click', () => switchView('practice'));
            btnFlashcards.addEventListener('click', () => switchView('flashcards'));
        }

        function switchView(view){
            learnSection.classList.add('hidden');
            practiceSection.classList.add('hidden');
            flashcardSection.classList.add('hidden');

            btnLearn.classList.replace('btn-primary', 'btn-ghost');
            btnPractice.classList.replace('btn-primary', 'btn-ghost');
            btnFlashcards.classList.replace('btn-primary', 'btn-ghost');

            if(view === 'learn'){
                learnSection.classList.remove('hidden');
                btnLearn.classList.replace('btn-ghost', 'btn-primary');
            } else if (view === 'practice') {
                practiceSection.classList.remove('hidden');
                btnPractice.classList.replace('btn-ghost', 'btn-primary');
                if (!quizStarted) {
                    startQuiz();
                    quizStarted = true;
                }
            } else if (view === 'flashcards') {
                flashcardSection.classList.remove('hidden');
                btnFlashcards.classList.replace('btn-ghost', 'btn-primary');
                if(!flashcardModeStarted) {
                    startFlashcards();
                    flashcardModeStarted = true;
                }
            }
        }
        
        // --- Regular Quiz Logic ---
        
        // Remove o event listener do bot√£o de ordem aleat√≥ria que n√£o existe mais
        // orderToggleBtn.addEventListener('click', ... );

        function renderQuestionButtons(buttonsEl, statusArr, index, orderArr){
            buttonsEl.innerHTML='';
            quizData.forEach((_,originalIndex)=>{
                const b = document.createElement('button');
                b.textContent = (originalIndex + 1);
                b.setAttribute('data-original-index', String(originalIndex));
                b.title = `Ir para a quest√£o ${originalIndex+1}`;
                b.onclick = ()=>{
                    const pos = orderArr.indexOf(originalIndex);
                    if(pos >= 0){ 
                        if(buttonsEl.id.includes('flash')){
                            currentIndexFlash = pos;
                            showFlashcard();
                        } else {
                            currentIndex = pos; 
                            showQuestion(); 
                        }
                    }
                };
                if(statusArr[originalIndex]==='correct') b.classList.add('correct-status');
                if(statusArr[originalIndex]==='wrong') b.classList.add('wrong-status');
                
                if ((quizStarted || flashcardModeStarted) && index < quizData.length) {
                    const currentQuestionOriginalIndex = orderArr[index];
                    if(originalIndex === currentQuestionOriginalIndex) {
                        b.classList.add('current-question');
                    }
                }
                
                buttonsEl.appendChild(b);
            });
        }
        
        function startQuiz(){
            // Define a ordem como crescente por padr√£o
            questionOrder = quizData.map((_, i) => i); 
            currentIndex = 0;
            questionStatus = Array(quizData.length).fill(null);
            showQuestion();
        }

        function showQuestion(){
            const finalResultsDiv = document.getElementById('final-results');
            if (finalResultsDiv) finalResultsDiv.remove();
            quizContainer.style.display = 'block';

            if (currentIndex >= quizData.length) {
                showFinalResults('practice');
                return;
            }
        
            const qIdx = questionOrder[currentIndex];
            const qObj = quizData[qIdx];
            
            questionInfoContainer.classList.remove('hidden');
            questionTopic.textContent = qObj.topic;
            questionDifficulty.textContent = qObj.difficulty;
            questionDifficulty.className = `difficulty-badge difficulty-${qObj.difficulty.toLowerCase()}`;
            
            questionText.innerHTML = `${qIdx + 1}) ${qObj.q.replace(/^[\s\d\)\(\.\:\-‚Äì‚Äî_]+/,'').trim()}`;
            
            optionsContainer.innerHTML='';
            feedbackContainer.innerHTML='';
            redoBtn.classList.add('hidden');
            nextBtn.classList.add('hidden'); 
            
            qObj.options.forEach(opt =>{
                const b = document.createElement('button');
                b.className='option-btn'; 
                b.textContent=opt;
                b.onclick = ()=> selectAnswer(b, opt, qObj.answer, qObj.explanation, qIdx);
                optionsContainer.appendChild(b);
            });

            renderQuestionButtons(questionButtons, questionStatus, currentIndex, questionOrder);
        }
        
        function selectAnswer(btn,opt,correct,explanation,qIdx){
            Array.from(optionsContainer.children).forEach(b=> {
                b.disabled=true;
                if(b.textContent === correct) {
                    b.classList.add('correct');
                }
            });
            nextBtn.classList.remove('hidden');

            if(opt===correct){
                btn.classList.add('celebrate');
                createConfetti();
                questionStatus[qIdx]='correct';
                feedbackContainer.className='feedback-correct mt-4';
                feedbackContainer.textContent = 'Correto! ' + (explanation || '');
            } else {
                btn.classList.add('wrong');
                questionStatus[qIdx]='wrong';
                feedbackContainer.className='feedback-wrong mt-4';
                feedbackContainer.innerHTML = `<strong>Errado.</strong> ${explanation || ''}`;
                redoBtn.classList.remove('hidden');
            }
            renderQuestionButtons(questionButtons, questionStatus, currentIndex, questionOrder);
        }

        nextBtn.addEventListener('click', ()=>{
            if(currentIndex < questionOrder.length-1){ 
                currentIndex++; 
                showQuestion(); 
            } else { 
                currentIndex++;
                showFinalResults('practice');
            }
        });

        redoBtn.addEventListener('click', ()=>{
            const currentQuestionIndex = questionOrder[currentIndex];
            questionStatus[currentQuestionIndex] = null;
            showQuestion();
        });

        // --- Flashcard Mode Logic ---
        
        let questionOrderFlash = quizData.map((_,i)=>i);
        let currentIndexFlash = 0;
        let questionStatusFlash = Array(quizData.length).fill(null);
        let isRandomOrderFlash = false;

        orderToggleBtnFlash.addEventListener('click', () => {
            isRandomOrderFlash = !isRandomOrderFlash; 
            orderToggleBtnFlash.textContent = isRandomOrderFlash ? 'Ordem Aleat√≥ria' : 'Ordem Crescente';
            startFlashcards();
        });

        function startFlashcards(){
            if (isRandomOrderFlash) {
                shuffleArray(questionOrderFlash);
            } else {
                questionOrderFlash = quizData.map((_, i) => i);
            }
            currentIndexFlash = 0;
            questionStatusFlash.fill(null);
            showFlashcard();
        }

        function showFlashcard(){
            const finalResultsDiv = document.getElementById('final-results-flash');
            if (finalResultsDiv) finalResultsDiv.remove();
            flashcardContainer.style.display = 'block';

            if (currentIndexFlash >= quizData.length) {
                showFinalResults('flashcards');
                return;
            }

            const qIdx = questionOrderFlash[currentIndexFlash];
            const qObj = quizData[qIdx];

            cardFrontFlash.innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <p class="text-sm font-semibold text-[var(--accent)]">${qObj.topic}</p>
                    <span class="difficulty-badge difficulty-${qObj.difficulty.toLowerCase()}">${qObj.difficulty}</span>
                </div>
                <p>${qIdx + 1}) ${qObj.q.replace(/^[\s\d\)\(\.\:\-‚Äì‚Äî_]+/,'').trim()}</p>
                <div id="flashcard-options" class="mt-4 grid gap-3"></div>
            `;
            
            const flashcardOptionsContainer = document.getElementById('flashcard-options');
            qObj.options.forEach(opt => {
                const optEl = document.createElement('div');
                optEl.className = 'flashcard-option';
                optEl.textContent = opt;
                flashcardOptionsContainer.appendChild(optEl);
            });

            flashcardExplanation.innerHTML = `<strong>Resposta Correta:</strong> ${qObj.answer}<br>${qObj.explanation}`;
            
            cardBackFlash.style.display = 'none';
            revealBtn.style.display = 'block';
            assessmentControls.style.display = 'none';

            renderQuestionButtons(questionButtonsFlash, questionStatusFlash, currentIndexFlash, questionOrderFlash);
        }

        revealBtn.addEventListener('click', () => {
            const qIdx = questionOrderFlash[currentIndexFlash];
            const qObj = quizData[qIdx];
            
            cardBackFlash.style.display = 'block';
             Array.from(document.querySelectorAll('#flashcard-options .flashcard-option')).forEach(child => {
                if (child.textContent === qObj.answer) {
                    child.classList.add('correct-highlight');
                }
            });

            revealBtn.style.display = 'none';
            assessmentControls.style.display = 'grid';
        });

        function assessFlashcard(status) {
            const qIdx = questionOrderFlash[currentIndexFlash];
            questionStatusFlash[qIdx] = status;
            
            currentIndexFlash++;
            showFlashcard();
        }

        correctBtn.addEventListener('click', () => assessFlashcard('correct'));
        wrongBtn.addEventListener('click', () => assessFlashcard('wrong'));


        // --- Shared Functions ---

        function showFinalResults(mode) {
            const statusArray = mode === 'practice' ? questionStatus : questionStatusFlash;
            const container = mode === 'practice' ? quizContainer : flashcardContainer;
            const parentSection = mode === 'practice' ? practiceSection : flashcardSection;

            const correctCount = statusArray.filter(s => s === 'correct').length;
            const total = quizData.length;
            
            container.style.display = 'none';

            let finalResultsDiv = document.createElement('div');
            finalResultsDiv.id = `final-results-${mode}`;
            finalResultsDiv.className = 'text-center';
            parentSection.appendChild(finalResultsDiv);

            finalResultsDiv.innerHTML = `
                <h2 class="text-2xl font-bold">üéâ Fim do Quiz! üéâ</h2>
                <p class="text-lg mt-4">Voc√™ acertou ${correctCount} de ${total} quest√µes.</p>
                <button id="restart-btn-${mode}" class="btn-primary mt-6">Recome√ßar</button>
            `;
            
            document.getElementById(`restart-btn-${mode}`).onclick = () => {
                if(mode === 'practice') {
                    quizStarted = false;
                    startQuiz(); 
                    quizStarted = true;
                } else {
                    flashcardModeStarted = false;
                    startFlashcards();
                    flashcardModeStarted = true;
                }
            };
        }

        function shuffleArray(a){
            for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; }
        }

        function createConfetti(){
            const colors = ['#f59e0b','#ef4444','#10b981','#3b82f6','#8b5cf6'];
            for(let i=0;i<12;i++){
                const el = document.createElement('div');
                el.className='confetti';
                el.style.left = (30 + Math.random()*40) + '%';
                el.style.top = (10 + Math.random()*10) + 'vh';
                el.style.color = colors[Math.floor(Math.random()*colors.length)];
                el.textContent = 'üéâ';
                el.style.transform = `rotate(${Math.random()*360}deg)`;
                el.style.animation = `confetti-fall ${1.2 + Math.random()*1}s linear forwards`;
                document.body.appendChild(el);
                setTimeout(()=> el.remove(), 2200);
            }
        }
        
        setupNavEvents();
        switchView('learn');
    });
    </script>
</body>
</html>
