<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudos: Reprodução (8º Ano)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        /* Cores principais atualizadas */
        .bg-dark-bg { background-color: #121212; } /* Fundo principal */
        .bg-dark-surface { background-color: #1E1E1E; } /* Cartões e nav */
        .text-dark-text { color: #E0E0E0; } /* Texto padrão */
        .text-dark-light-text { color: #B0B0B0; } /* Texto secundário/p */

        /* paleta de destaque: Tons de Bronze/Dourado Envelhecido */
        .accent-primary { background-color: #D97706; color: white; } /* Laranja escuro/Bronze (Orange 700) */
        .hover\:accent-primary-dark { background-color: #C26402; } /* Laranja mais escuro (Orange 800) */
        .accent-secondary { color: #FDBA74; } /* Laranja claro/Pêssego (Orange 300) */
        .text-highlight { color: #FED7AA; } /* Laranja mais claro (Orange 200) para destaques */
        .text-success { color: #34D399; } /* Esmeralda para sucesso */
        .bg-success-dark { background-color: #065F46; } /* Esmeralda mais escuro */
        .text-error { color: #EF4444; } /* Vermelho para erro */
        .bg-error-dark { background-color: #991B1B; } /* Vermelho mais escuro */
        
        .mode-button.active {
            background-color: #D97706; /* Cor principal de destaque */
            color: white;
        }
        .nav-link.active {
            background-color: #D97706; /* Cor principal de destaque */
            color: white;
        }

        .prose-headings {
            color: #FDBA74; /* Laranja claro (Orange 300) */
        }
        .prose-strong {
            color: #FDBA74; /* Laranja claro (Orange 300) */
        }
        .prose-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1em;
            margin-bottom: 1em;
            overflow: auto;
            display: block;
        }
        .prose-th, .prose-td {
            border: 1px solid #424242; /* Cinza mais escuro para bordas da tabela */
            padding: 0.5em 1em;
            white-space: nowrap;
        }
        .prose-th {
            background-color: #2F2F2F; /* Fundo mais escuro para cabeçalho da tabela */
            font-weight: 600;
        }
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-dark-bg text-dark-text">

    <div class="w-full max-w-7xl mx-auto">
        <header class="text-center py-8 px-4">
            <h1 class="text-4xl sm:text-5xl font-bold text-white mb-4">Reprodução (8º Ano)</h1>
            <p class="text-lg text-dark-light-text">Um guia sobre os processos assexuados, sexuados e estratégias reprodutivas.</p>
        </header>
        
        <nav class="flex justify-center items-center bg-dark-surface rounded-lg p-2 mb-8 gap-2 flex-wrap max-w-md mx-auto">
            <button id="btn-learn" class="mode-button accent-primary flex-grow sm:flex-grow-0 text-center py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">Aprender</button>
            <button id="btn-practice" class="mode-button flex-grow sm:flex-grow-0 text-center py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">Praticar</button>
        </nav>

        <div id="learn-container">
            <div class="flex flex-col lg:flex-row gap-8 p-4">
                <!-- Navegação Lateral --><aside class="lg:w-1/4">
                    <nav class="sticky top-4 bg-dark-surface rounded-lg p-4">
                        <h3 class="text-xl font-bold text-white mb-4">Tópicos</h3>
                        <ul class="space-y-2">
                            <li><a href="#r_assexuada" class="nav-link block py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark active">1. Reprodução Assexuada</a></li>
                            <li><a href="#r_sexuada" class="nav-link block py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">2. Reprodução Sexuada</a></li>
                            <li><a href="#estrategias" class="nav-link block py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">3. Estratégias Reprodutivas</a></li>
                            <li><a href="#coevolucao" class="nav-link block py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">4. Coevolução e Polinização</a></li>
                        </ul>
                    </nav>
                </aside>

                <!-- Conteúdo Principal --><main class="lg:w-3/4 space-y-12">
                    
                    <section id="r_assexuada" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg">
                        <article class="prose prose-invert max-w-none text-dark-light-text">
                            <h2 class="text-3xl font-bold border-b border-gray-700 pb-2 mb-4 prose-headings">1. Reprodução Assexuada</h2>
                            <p>A <strong class="prose-strong">reprodução assexuada</strong> envolve apenas <strong class="text-highlight">um indivíduo</strong> (progenitor) e não há troca de material genético (gametas). Os descendentes são geneticamente <strong class="text-highlight">idênticos</strong> ao progenitor, ou seja, são clones.</p>
                            
                            <h3 class="text-2xl font-semibold mt-6">Tipos de Reprodução Assexuada</h3>
                            <ul>
                                <li><strong>Regeneração (ou Fragmentação):</strong> Ocorre quando um organismo é dividido em partes e cada parte consegue se regenerar, dando origem a um novo indivíduo completo. Muito comum em estrelas-do-mar e planárias.</li>
                                <li><strong>Esporulação:</strong> Formação de estruturas muito resistentes chamadas <strong class="text-highlight">esporos</strong>. Cada esporo, ao encontrar um ambiente favorável, pode germinar e originar um novo indivíduo. Comum em fungos (bolor do pão) e samambaias.</li>
                                <li><strong>Propagação Vegetativa (ou Brotamento em plantas):</strong> Partes de uma planta (como um caule, folha ou raiz) dão origem a uma nova planta completa. É o que acontece quando plantamos uma "muda" de roseira ou samambaia.</li>
                                <li><strong>Partenogênese:</strong> Um óvulo (gameta feminino) se desenvolve e origina um novo indivíduo <strong class="text-highlight">sem ter sido fecundado</strong> por um gameta masculino. Ocorre em abelhas (para originar o zangão), alguns peixes, répteis e pulgões.</li>
                            </ul>

                            <h3 class="text-2xl font-semibold mt-6">Vantagens da Reprodução Assexuada</h3>
                            <ul>
                                <li><strong>Rapidez:</strong> Permite gerar um grande número de descendentes em pouco tempo.</li>
                                <li><strong>Baixo Custo Energético:</strong> Não é preciso gastar energia para procurar um parceiro ou produzir gametas complexos.</li>
                                <li><strong>Colonização:</strong> Um único indivíduo pode colonizar um novo ambiente rapidamente.</li>
                            </ul>

                            <h3 class="text-2xl font-semibold mt-6">Desvantagens da Reprodução Assexuada</h3>
                            <ul>
                                <li><strong>Falta de Variabilidade Genética:</strong> Como todos os indivíduos são clones, eles são igualmente vulneráveis a mudanças no ambiente (como novas doenças ou predadores). Se uma condição desfavorável surge, pode eliminar a população inteira.</li>
                            </ul>
                        </article>
                    </section>
                    
                    <section id="r_sexuada" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg">
                        <article class="prose prose-invert max-w-none text-dark-light-text">
                            <h2 class="text-3xl font-bold border-b border-gray-700 pb-2 mb-4 prose-headings">2. Reprodução Sexuada</h2>
                            <p>A <strong class="prose-strong">reprodução sexuada</strong> geralmente envolve <strong class="text-highlight">dois indivíduos</strong> e há a troca de material genético através da fusão de <strong class="text-highlight">gametas</strong> (células reprodutivas).</p>
                            
                            <h3 class="text-2xl font-semibold mt-6">Conceitos Importantes</h3>
                            <ul>
                                <li><strong>Gametas:</strong> Células reprodutivas especializadas. O gameta masculino (espermatozoide em animais, pólen em plantas) se une ao gameta feminino (óvulo).</li>
                                <li><strong>Haploides (n):</strong> Células que possuem <strong class="text-highlight">metade</strong> do número de cromossomos da espécie. Os gametas são sempre haploides.</li>
                                <li><strong>Diploides (2n):</strong> Células que possuem o número <strong class="text-highlight">completo</strong> de cromossomos da espécie (um conjunto vindo da mãe e outro do pai). As células do nosso corpo (pele, músculo, etc.) são diploides.</li>
                                <li><strong>Meiose:</strong> É o tipo de divisão celular que <strong class="text-highlight">produz os gametas</strong>. Ela reduz o número de cromossomos pela metade (transforma uma célula diploide 2n em quatro células haploides n).</li>
                                <li><strong>Fecundação:</strong> É a fusão do gameta masculino (n) com o gameta feminino (n), formando o <strong class="text-highlight">zigoto (2n)</strong>, que é a primeira célula diploide do novo indivíduo.</li>
                            </ul>

                            <h3 class="text-2xl font-semibold mt-6">Vantagens da Reprodução Sexuada</h3>
                            <ul>
                                <li><strong>Variabilidade Genética:</strong> Esta é a principal vantagem. Como os descendentes são uma mistura genética dos pais, cada um é único. Isso aumenta a chance de que alguns indivíduos da população sobrevivam a mudanças ambientais e doenças.</li>
                            </ul>

                            <h3 class="text-2xl font-semibold mt-6">Conjugação</h3>
                            <p>A <strong class="prose-strong">conjugação</strong> é um tipo especial de reprodução sexuada que ocorre em bactérias e protozoários (como o Paramécio). Nela, dois indivíduos se aproximam e <strong class="text-highlight">trocam material genético</strong> (partes do DNA) diretamente, sem formar gametas. Após a troca, eles se separam. Isso aumenta a variabilidade genética da população.</p>
                        </article>
                    </section>

                    <section id="estrategias" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg">
                        <article class="prose prose-invert max-w-none text-dark-light-text">
                            <h2 class="text-3xl font-bold border-b border-gray-700 pb-2 mb-4 prose-headings">3. Estratégias Reprodutivas dos Animais</h2>
                            
                            <h3 class="text-2xl font-semibold mt-6">Tipos de Indivíduos</h3>
                            <ul>
                                <li><strong>Dioicos:</strong> Espécies que possuem sexos separados (indivíduos <strong class="text-highlight">machos</strong>, que produzem espermatozoides, e indivíduos <strong class="text-highlight">fêmeas</strong>, que produzem óvulos). Ex: Seres humanos, cães, aves.</li>
                                <li><strong>Monoicos (ou Hermafroditas):</strong> Espécies em que o <strong class="text-highlight">mesmo indivíduo</strong> produz os dois tipos de gametas (espermatozoide e óvulo). Ex: Minhocas, caracóis.</li>
                                <li><strong>Autofecundação:</strong> Ocorre em alguns seres monoicos, onde os gametas do mesmo indivíduo se fecundam. É raro, pois diminui a variabilidade genética. Ex: Tênia (solitária).</li>
                            </ul>

                            <h3 class="text-2xl font-semibold mt-6">Tipos de Fecundação</h3>
                            <ul>
                                <li><strong>Fecundação Externa:</strong> A fusão dos gametas (fecundação) ocorre <strong class="text-highlight">fora do corpo</strong> da fêmea, geralmente na água. Os animais que fazem isso são chamados de <strong class="text-highlight">ovulíparos</strong>. Ex: Maioria dos peixes e anfíbios (sapos).</li>
                                <li><strong>Fecundação Interna:</strong> A fusão dos gametas ocorre <strong class="text-highlight">dentro do corpo</strong> da fêmea. Isso geralmente requer uma <strong class="text-highlight">cópula</strong> (ato sexual). Ex: Répteis, aves, mamíferos, insetos.</li>
                            </ul>

                            <h3 class="text-2xl font-semibold mt-6">Tipos de Desenvolvimento do Embrião</h3>
                            <ul>
                                <li><strong>Ovíparo:</strong> O embrião se desenvolve <strong class="text-highlight">dentro de um ovo</strong>, que é liberado <strong class="text-highlight">fora do corpo</strong> da mãe. Os nutrientes vêm do vitelo (gema) do ovo. Ex: Aves, répteis, insetos, peixes.</li>
                                <li><strong>Ovovivíparo:</strong> O embrião se desenvolve <strong class="text-highlight">dentro de um ovo</strong>, mas este ovo permanece <strong class="text-highlight">dentro do corpo</strong> da mãe. O embrião se alimenta do vitelo do ovo (não há troca de nutrientes com a mãe). O ovo "eclode" dentro da mãe e o filhote nasce pronto. Ex: Alguns tubarões e serpentes.</li>
                                <li><strong>Vivíparo:</strong> O embrião se desenvolve <strong class="text-highlight">totalmente dentro do corpo</strong> da mãe, recebendo nutrientes e oxigênio diretamente dela (através da placenta, na maioria dos mamíferos). Ex: Maioria dos mamíferos (seres humanos, cães, gatos).</li>
                            </ul>

                            <h3 class="text-2xl font-semibold mt-6">Desenvolvimento e Cuidado</h3>
                            <ul>
                                <li><strong>Desenvolvimento Direto:</strong> O filhote nasce <strong class="text-highlight">semelhante ao adulto</strong>, apenas menor. Não há fase de larva. Ex: Seres humanos, aves, répteis.</li>
                                <li><strong>Desenvolvimento Indireto:</strong> O filhote nasce em uma forma jovem (chamada <strong class="text-highlight">larva</strong>), que é muito diferente do adulto. A larva passa por uma <strong class="text-highlight">metamorfose</strong> para se tornar adulta. Ex: Borboletas (lagarta), sapos (girino), mosquitos.</li>
                                <li><strong>Cuidado Parental:</strong> Refere-se a qualquer comportamento dos pais que aumenta a chance de sobrevivência dos filhotes (proteger de predadores, alimentar, aquecer). É comum em aves e mamíferos.</li>
                            </ul>
                        </article>
                    </section>
                    
                    <section id="coevolucao" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg">
                        <article class="prose prose-invert max-w-none text-dark-light-text">
                            <h2 class="text-3xl font-bold border-b border-gray-700 pb-2 mb-4 prose-headings">4. Coevolução e Polinização</h2>
                            <p>A <strong class="prose-strong">coevolução</strong> é o processo em que duas ou mais espécies afetam mutuamente a evolução uma da outra. A reprodução é um campo fértil para isso.</p>
                            
                            <h3 class="text-2xl font-semibold mt-6">Polinização: Um Exemplo Clássico</h3>
                            <p>A <strong class="text-highlight">polinização</strong> é o transporte do grão de pólen (gameta masculino da planta) até a parte feminina da flor, permitindo a fecundação.</p>
                            <ul>
                                <li>Muitas plantas evoluíram para atrair animais específicos (insetos, aves, morcegos) para fazer esse transporte.</li>
                                <li><strong class="text-highlight">Flores e Polinizadores:</strong> A forma, a cor e o cheiro da flor evoluíram junto com as características do seu animal polinizador.
                                    <ul>
                                        <li>Flores vermelhas e sem cheiro atraem pássaros (beija-flor), que enxergam bem o vermelho mas não têm olfato apurado.</li>
                                        <li>Flores com cheiros fortes à noite atraem morcegos ou mariposas.</li>
                                        <li>O formato da flor muitas vezes se encaixa perfeitamente no bico do beija-flor ou na língua da borboleta.</li>
                                    </ul>
                                </li>
                                <li>Essa relação é benéfica: a planta consegue se reproduzir (reprodução sexuada, garantindo variabilidade) e o animal ganha alimento (néctar).</li>
                            </ul>
                        </article>
                    </section>
                </main>
            </div>
        </div>
        
        <!-- Seção Praticar --><section id="practice-section" class="hidden p-4">
            <div id="quiz-container" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg max-w-3xl mx-auto">
                <div id="question-header" class="mb-4 text-center">
                    <p class="accent-secondary font-semibold" id="question-topic"></p>
                </div>
                <p id="question-text" class="text-xl text-center mb-6 min-h-[60px]"></p>
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                <div id="feedback-container" class="mt-6 text-center"></div>

                <!-- Navegação --><div class="flex justify-between items-center mt-8">
                    <button id="prev-btn" class="accent-primary py-2 px-5 rounded-md font-semibold transition-colors hover:accent-primary-dark disabled:bg-gray-600 disabled:cursor-not-allowed">Anterior</button>
                    <span id="question-counter" class="font-semibold text-dark-text"></span>
                    <button id="next-btn" class="accent-primary py-2 px-5 rounded-md font-semibold transition-colors hover:accent-primary-dark">Próxima</button>
                </div>
            </div>

            <!-- Navegação de Questões --><div id="question-nav-container" class="hidden bg-dark-surface p-4 rounded-lg shadow-lg max-w-3xl mx-auto mt-4">
                <div id="question-buttons-grid" class="flex flex-wrap justify-center gap-2">
                    <!-- Buttons will be programmatically inserted here --></div>
            </div>

             <!-- Tela de Pontuação --><div id="score-screen" class="hidden text-center bg-dark-surface p-8 rounded-lg shadow-lg max-w-3xl mx-auto mt-8">
                <h3 class="text-4xl font-bold text-white mb-4">Pontuação Final</h3>
                <p id="final-score" class="text-6xl font-bold accent-secondary mb-2"></p>
                <p id="score-message" class="text-lg text-dark-light-text mb-8"></p>
                <button id="restart-btn" class="bg-green-600 text-white py-3 px-8 rounded-lg font-semibold text-lg hover:bg-green-500 transition-colors">Recomeçar</button>
            </div>
        </section>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        // --- BANCO DE DADOS DAS QUESTÕES ---
        const questions = [
            // NÍVEL FÁCIL (10 Questões)
            { topic: "Reprodução Assexuada", difficulty: "Fácil", question: "Qual é a principal característica da reprodução assexuada?", options: ["Produz variabilidade genética", "Envolve a fusão de gametas", "Envolve apenas um progenitor", "Sempre ocorre em animais"], answer: 2, explanation: "A reprodução assexuada envolve apenas um progenitor e os descendentes são geneticamente idênticos a ele." },
            { topic: "Reprodução Sexuada", difficulty: "Fácil", question: "Como são chamadas as células reprodutivas que se fundem na reprodução sexuada?", options: ["Esporos", "Clones", "Gametas", "Zigotos"], answer: 2, explanation: "Gametas (como espermatozoide e óvulo) são as células que se unem para formar um novo indivíduo." },
            { topic: "Reprodução Sexuada", difficulty: "Fácil", question: "Células que possuem metade do número de cromossomos da espécie (n) são chamadas de:", options: ["Diploides", "Haploides", "Clones", "Zigotos"], answer: 1, explanation: "Células haploides (n) têm metade do material genético, como os gametas." },
            { topic: "Reprodução Sexuada", difficulty: "Fácil", question: "Células que possuem o número completo de cromossomos da espécie (2n) são chamadas de:", options: ["Diploides", "Haploides", "Gametas", "Esporos"], answer: 0, explanation: "Células diploides (2n) têm o conjunto completo de cromossomos, como as células do nosso corpo." },
            { topic: "Estratégias Reprodutivas", difficulty: "Fácil", question: "Como é chamado um animal que bota ovo, e o filhote se desenvolve fora do corpo da mãe?", options: ["Vivíparo", "Ovíparo", "Ovovivíparo", "Monoico"], answer: 1, explanation: "Ovíparos (como as aves) botam ovos, e o desenvolvimento do embrião é externo." },
            { topic: "Estratégias Reprodutivas", difficulty: "Fácil", question: "Como é chamado um animal cujo embrião se desenvolve totalmente dentro do corpo da mãe, recebendo nutrientes dela?", options: ["Vivíparo", "Ovíparo", "Ovovivíparo", "Dioico"], answer: 0, explanation: "Vivíparos (como os mamíferos) nutrem o filhote dentro do corpo da mãe." },
            { topic: "Estratégias Reprodutivas", difficulty: "Fácil", question: "Espécies que possuem sexos separados (machos e fêmeas) são chamadas de:", options: ["Monoicas", "Hermafroditas", "Dioicas", "Assexuadas"], answer: 2, explanation: "Dioico significa 'duas casas' (sexos separados). Monoico significa 'uma casa' (hermafrodita)." },
            { topic: "Estratégias Reprodutivas", difficulty: "Fácil", question: "Espécies em que o mesmo indivíduo produz os dois tipos de gametas (macho e fêmea) são chamadas de:", options: ["Dioicas", "Ovulíparas", "Monoicas (Hermafroditas)", "Vivíparas"], answer: 2, explanation: "Monoicos ou Hermafroditas (como a minhoca) são indivíduos que possuem os dois sexos." },
            { topic: "R. Assexuada (Tipos)", difficulty: "Fácil", question: "O bolor do pão se espalha liberando estruturas resistentes chamadas:", options: ["Gametas", "Esporos", "Mudas", "Óvulos"], answer: 1, explanation: "A esporulação é a formação de esporos, comuns em fungos e samambaias." },
            { topic: "Estratégias Reprodutivas", difficulty: "Fácil", question: "O que é desenvolvimento direto?", options: ["O filhote nasce como uma larva", "O filhote passa por metamorfose", "O filhote nasce semelhante ao adulto", "O filhote se desenvolve no ovo"], answer: 2, explanation: "No desenvolvimento direto (como em humanos e aves), o filhote já nasce com a forma do adulto, apenas menor." },

            // NÍVEL MÉDIO (10 Questões)
            { topic: "R. Assexuada (Vantagens)", difficulty: "Média", question: "Qual é a principal VANTAGEM da reprodução assexuada?", options: ["Produz clones", "Gera variabilidade genética", "É rápida e tem baixo custo energético", "Depende de um parceiro"], answer: 2, explanation: "A rapidez e o baixo custo (sem necessidade de procurar parceiro) são as maiores vantagens." },
            { topic: "R. Assexuada (Desvantagens)", difficulty: "Média", question: "Qual é a principal DESVANTAGEM da reprodução assexuada?", options: ["É muito lenta", "Gera poucos descendentes", "Causa doenças na população", "Não gera variabilidade genética"], answer: 3, explanation: "A falta de variabilidade genética torna a população inteira vulnerável a mudanças no ambiente." },
            { topic: "R. Assexuada (Tipos)", difficulty: "Média", question: "A capacidade da estrela-do-mar de gerar um novo indivíduo a partir de um braço perdido é um exemplo de:", options: ["Esporulação", "Partenogênese", "Propagação vegetativa", "Regeneração"], answer: 3, explanation: "Regeneração (ou fragmentação) é a capacidade de formar novos indivíduos a partir de partes do corpo." },
            { topic: "R. Assexuada (Tipos)", difficulty: "Média", question: "O desenvolvimento de um óvulo não fecundado, gerando um novo indivíduo (como o zangão na colmeia), é chamado de:", options: ["Autofecundação", "Regeneração", "Partenogênese", "Cópula"], answer: 2, explanation: "Partenogênese é o desenvolvimento de um óvulo sem fecundação." },
            { topic: "Reprodução Sexuada", difficulty: "Média", question: "Qual é a principal VANTAGEM da reprodução sexuada?", options: ["É muito rápida", "Produz clones", "Gera variabilidade genética", "Envolve apenas um indivíduo"], answer: 2, explanation: "A principal vantagem é a variabilidade genética, que aumenta a adaptação da espécie ao ambiente." },
            { topic: "Reprodução Sexuada", difficulty: "Média", question: "O processo de divisão celular que forma os gametas (reduzindo os cromossomos pela metade) é chamado de:", options: ["Mitose", "Fecundação", "Meiose", "Regeneração"], answer: 2, explanation: "A Meiose é o processo que transforma células diploides (2n) em haploides (n)." },
            { topic: "Estratégias Reprodutivas", difficulty: "Média", question: "A fusão dos gametas que ocorre fora do corpo da fêmea, geralmente na água (como em peixes), é chamada de:", options: ["Fecundação interna", "Fecundação externa", "Partenogênese", "Cópula"], answer: 1, explanation: "A fecundação externa é típica de ambientes aquáticos. Os animais são chamados ovulíparos." },
            { topic: "Estratégias Reprodutivas", difficulty: "Média", question: "Animais que mantêm o ovo dentro do corpo da mãe, mas o embrião se nutre apenas do ovo (sem troca com a mãe), são:", options: ["Ovíparos", "Ovovivíparos", "Vivíparos", "Hermafroditas"], answer: 1, explanation: "Ovovivíparos (alguns tubarões e cobras) mantêm o ovo dentro do corpo, mas a nutrição vem do próprio ovo." },
            { topic: "Estratégias Reprodutivas", difficulty: "Média", question: "O desenvolvimento que possui uma fase de larva (como o girino do sapo) é chamado de:", options: ["Desenvolvimento direto", "Desenvolvimento indireto", "Cuidado parental", "Vivíparo"], answer: 1, explanation: "Desenvolvimento indireto envolve metamorfose (mudança de forma) da larva para o adulto." },
            { topic: "Coevolução", difficulty: "Média", question: "A relação em que a forma da flor se adapta ao bico do beija-flor, beneficiando ambos, é um exemplo de:", options: ["Partenogênese", "Coevolução", "Autofecundação", "Desenvolvimento indireto"], answer: 1, explanation: "Coevolução é a evolução conjunta de duas espécies que interagem fortemente, como a planta e seu polinizador." },

            // NÍVEL DIFÍCIL (10 Questões)
            { topic: "Reprodução Sexuada", difficulty: "Difícil", question: "Se uma espécie tem 40 cromossomos em suas células diploides (2n=40), quantos cromossomos terão seus gametas (n)?", options: ["40", "80", "20", "10"], answer: 2, explanation: "Os gametas são haploides (n), formados por meiose. Eles têm metade dos cromossomos da espécie (n=20)." },
            { topic: "R. Assexuada (Tipos)", difficulty: "Difícil", question: "Plantar um pedaço do caule de uma roseira para obter uma nova planta é um exemplo de:", options: ["Propagação vegetativa", "Partenogênese", "Metamorfose", "Esporulação"], answer: 0, explanation: "Propagação vegetativa (ou estaquia) é o uso de partes da planta (mudas) para gerar uma nova planta clone." },
            { topic: "Estratégias Reprodutivas", difficulty: "Difícil", question: "Minhocas são monoicas (hermafroditas), mas geralmente fazem fecundação cruzada (trocam gametas com outra minhoca). Por quê?", options: ["Para evitar a autofecundação e garantir a variabilidade genética", "Porque não conseguem se alcançar (autofecundação)", "Para gerar clones mais fortes", "Porque são dioicas"], answer: 0, explanation: "A autofecundação é evitada na maioria dos seres monoicos para garantir a vantagem da reprodução sexuada: a variabilidade genética." },
            { topic: "Estratégias Reprodutivas", difficulty: "Difícil", question: "A Tênia (solitária) é um animal monoico que vive sozinho no intestino. Ela se reproduz principalmente por:", options: ["Esporulação", "Fecundação externa", "Autofecundação", "Partenogênese"], answer: 2, explanation: "Como vive sozinha, a Tênia é um dos raros exemplos onde a autofecundação (fecundar a si mesma) é a principal estratégia." },
            { topic: "Reprodução Sexuada", difficulty: "Difícil", question: "Qual é a principal diferença entre a Conjugação (em bactérias) e a Fecundação (em animais)?", options: ["A conjugação é assexuada", "A conjugação não forma um novo indivíduo, apenas troca DNA", "A fecundação não gera variabilidade", "A conjugação forma um zigoto"], answer: 1, explanation: "A fecundação une gametas para criar um novo ser. A conjugação é uma troca de material genético (DNA) entre dois seres existentes, sem criar um novo." },
            { topic: "Estratégias Reprodutivas", difficulty: "Difícil", question: "Mamíferos e aves geralmente têm poucos filhotes por vez, mas investem muito tempo protegendo-os e alimentando-os. Isso é chamado de:", options: ["Fecundação externa", "Desenvolvimento indireto", "Cuidado parental", "Ovulíparos"], answer: 2, explanation: "O cuidado parental é uma estratégia que aumenta a chance de sobrevivência de uma prole pequena." },
            { topic: "Estratégias Reprodutivas", difficulty: "Difícil", question: "A cópula (ato sexual) é uma adaptação necessária para qual tipo de fecundação?", options: ["Fecundação externa", "Fecundação interna", "Esporulação", "Fragmentação"], answer: 1, explanation: "A cópula é o mecanismo que permite que o gameta masculino seja depositado dentro do corpo da fêmea, garantindo a fecundação interna." },
            { topic: "Coevolução", difficulty: "Difícil", question: "Flores que abrem à noite e têm cheiro forte são provavelmente polinizadas por:", options: ["Beija-flores (aves)", "Borboletas (diurnas)", "Morcegos ou Mariposas (noturnos)", "Vento"], answer: 2, explanation: "Animais noturnos, como morcegos e mariposas, usam o olfato (cheiro forte) para encontrar flores no escuro." },
            { topic: "Estratégias Reprodutivas", difficulty: "Difícil", question: "Qual é a principal vantagem da fecundação interna sobre a externa?", options: ["Não gasta energia", "Gera clones", "Produz mais filhotes", "Maior proteção aos gametas e maior chance de fecundação"], answer: 3, explanation: "Na fecundação interna, os gametas estão protegidos dentro do corpo, aumentando a chance de encontro (fecundação) e protegendo contra predadores." },
            { topic: "R. Assexuada (Vantagens)", difficulty: "Difícil", question: "A reprodução assexuada é muito vantajosa em qual situação?", options: ["Em um ambiente que muda rapidamente", "Em um ambiente estável, onde o indivíduo está bem adaptado", "Para espécies que precisam de alta variabilidade genética", "Para animais com cuidado parental"], answer: 1, explanation: "Se o ambiente é estável e o indivíduo (progenitor) está perfeitamente adaptado, gerar clones (assexuada) é a forma mais rápida de espalhar esses genes de sucesso." }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            // --- LÓGECA DO MODO DE APRENDIZAGEM ---
            const links = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('#learn-container main section');

            const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        links.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, observerOptions);

            sections.forEach(section => { observer.observe(section); });
            
            links.forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
                });
            });

            // --- LÓGICA DO MODO DE PRÁTICA ---
            const btnLearn = document.getElementById('btn-learn');
            const btnPractice = document.getElementById('btn-practice');
            const learnContainer = document.getElementById('learn-container');
            const practiceSection = document.getElementById('practice-section');
            
            const quizContainer = document.getElementById('quiz-container');
            const scoreScreen = document.getElementById('score-screen');
            const questionTopic = document.getElementById('question-topic');
            const questionText = document.getElementById('question-text');
            const optionsContainer = document.getElementById('options-container');
            const feedbackContainer = document.getElementById('feedback-container');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const questionCounter = document.getElementById('question-counter');
            const finalScore = document.getElementById('final-score');
            const scoreMessage = document.getElementById('score-message');
            const restartBtn = document.getElementById('restart-btn');
            const questionNavContainer = document.getElementById('question-nav-container');

            let state = {
                currentMode: 'learn',
                currentQuestionIndex: 0,
                userAnswers: [],
                score: 0,
            };

            function switchMode(mode) {
                state.currentMode = mode;
                btnLearn.classList.toggle('active', mode === 'learn');
                btnPractice.classList.toggle('active', mode !== 'learn');
                learnContainer.classList.toggle('hidden', mode !== 'learn');
                practiceSection.classList.toggle('hidden', mode === 'learn');

                if (mode === 'practice') {
                    startPractice();
                }
            }

            function startPractice() {
                state.currentQuestionIndex = 0;
                state.score = 0;
                state.userAnswers = Array(questions.length).fill(null);
                quizContainer.classList.remove('hidden');
                scoreScreen.classList.add('hidden');
                questionNavContainer.classList.remove('hidden');
                renderQuestionNavigation();
                renderQuestion(0);
            }
            
            function renderQuestion(index) {
                const question = questions[index];
                questionTopic.textContent = `${question.topic} - (Nível: ${question.difficulty})`;
                questionText.innerHTML = question.question;
                
                questionCounter.textContent = `${index + 1} / ${questions.length}`;

                optionsContainer.innerHTML = '';
                feedbackContainer.innerHTML = '';

                question.options.forEach((option, i) => {
                    const button = document.createElement('button');
                    button.innerHTML = option;
                    button.className = "w-full text-left p-4 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors disabled:cursor-not-allowed";
                    button.onclick = () => checkAnswer(i, question.answer, question.explanation);
                    optionsContainer.appendChild(button);
                });

                updateNavButtonsState();
                updateQuestionNavButtons();
            }

            function checkAnswer(selectedIndex, correctIndex, explanation) {
                const isCorrect = selectedIndex === correctIndex;
                const isFirstAttempt = state.userAnswers[state.currentQuestionIndex] === null;
                const wasPreviouslyWrong = state.userAnswers[state.currentQuestionIndex] === false;

                if (isFirstAttempt) {
                    state.userAnswers[state.currentQuestionIndex] = isCorrect;
                    if (isCorrect) {
                        state.score++;
                        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                    }
                } else if (wasPreviouslyWrong && isCorrect) {
                    state.userAnswers[state.currentQuestionIndex] = true;
                    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                }

                Array.from(optionsContainer.children).forEach((btn, i) => {
                    btn.disabled = true;
                    if (i === correctIndex) {
                        btn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
                        btn.classList.add('bg-green-600', 'text-white');
                    } else if (i === selectedIndex) {
                        btn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
                        btn.classList.add('bg-red-600', 'text-white');
                    }
                });

                feedbackContainer.innerHTML = `
                    <div class="p-4 rounded-lg ${isCorrect ? 'bg-success-dark' : 'bg-error-dark'}">
                        <h4 class="font-bold text-lg mb-2">${isCorrect ? 'Resposta Correta!' : 'Resposta Incorreta!'}</h4>
                        <p class="text-sm" id="explanation-text"></p>
                        <button id="redo-question-btn" class="mt-4 py-2 px-4 accent-primary rounded-md font-semibold hover:accent-primary-dark transition-colors">Tentar Novamente</button>
                    </div>`;
                
                const explanationText = document.getElementById('explanation-text');
                explanationText.innerHTML = explanation;

                document.getElementById('redo-question-btn').addEventListener('click', resetCurrentQuestion);
                updateQuestionNavButtons();
            }
            
            function resetCurrentQuestion() {
                feedbackContainer.innerHTML = '';
                Array.from(optionsContainer.children).forEach(btn => {
                    btn.disabled = false;
                    btn.className = "w-full text-left p-4 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors disabled:cursor-not-allowed";
                });
            }

            function updateNavButtonsState() {
                prevBtn.disabled = state.currentQuestionIndex === 0;
                nextBtn.textContent = (state.currentQuestionIndex === questions.length - 1) ? "Finalizar" : "Próxima";
            }

            function nextQuestion() {
                if (state.currentQuestionIndex < questions.length - 1) {
                    goToQuestion(state.currentQuestionIndex + 1);
                } else {
                    showFinalScore();
                }
            }

            function prevQuestion() {
                if (state.currentQuestionIndex > 0) {
                   goToQuestion(state.currentQuestionIndex - 1);
                }
            }

            function goToQuestion(index) {
                if (index >= 0 && index < questions.length) {
                    state.currentQuestionIndex = index;
                    renderQuestion(index);
                }
            }

            function renderQuestionNavigation() {
                const grid = document.getElementById('question-buttons-grid');
                grid.innerHTML = '';
                for (let i = 0; i < questions.length; i++) {
                    const button = document.createElement('button');
                    button.textContent = i + 1;
                    button.className = 'w-9 h-9 flex items-center justify-center rounded-md font-semibold transition-all duration-200';
                    button.dataset.index = i;
                    button.onclick = () => goToQuestion(i);
                    grid.appendChild(button);
                }
            }
            
            function updateQuestionNavButtons() {
                const buttons = document.querySelectorAll('#question-buttons-grid button');
                buttons.forEach((btn, i) => {
                    btn.className = 'w-9 h-9 flex items-center justify-center rounded-md font-semibold transition-all duration-200';
                    const answerState = state.userAnswers[i];
                    
                    if (answerState === true) {
                        btn.classList.add('bg-green-600', 'text-white');
                    } else if (answerState === false) {
                        btn.classList.add('bg-red-600', 'text-white');
                    } else {
                        btn.classList.add('bg-gray-700', 'hover:bg-gray-600');
                    }

                    if (i === state.currentQuestionIndex) {
                        btn.classList.add('ring-2', 'ring-offset-2', 'ring-offset-gray-800', 'ring-orange-500'); 
                        btn.classList.remove('hover:bg-gray-600');
                    }
                });
            }
            
            function showFinalScore() {
                quizContainer.classList.add('hidden');
                scoreScreen.classList.remove('hidden');
                questionNavContainer.classList.add('hidden');

                const percentage = Math.round((state.score / questions.length) * 100);
                finalScore.textContent = `${percentage}%`;

                let message = '';
                if (percentage >= 90) message = "Excelente! Você dominou o assunto!";
                else if (percentage >= 70) message = "Muito bom! Continue praticando para aperfeiçoar.";
                else if (percentage >= 50) message = "Bom esforço! Reveja os tópicos que errou.";
                else message = "Não desanime! Reveja a seção 'Aprender' e tente novamente.";
                
                scoreMessage.textContent = `Você acertou ${state.score} de ${questions.length} questões. ${message}`;
            }

            // --- INICIALIZAÇÃO ---
            btnLearn.classList.add('active'); 
            
            btnLearn.addEventListener('click', () => switchMode('learn'));
            btnPractice.addEventListener('click', () => switchMode('practice'));
            prevBtn.addEventListener('click', prevQuestion);
            nextBtn.addEventListener('click', nextQuestion);
            restartBtn.addEventListener('click', startPractice);

            switchMode('learn');
        });
    </script>
</body>
</html>

